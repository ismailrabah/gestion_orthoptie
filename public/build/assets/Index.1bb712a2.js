import{J as j}from"./JigLayout.bb7b7d09.js";import{J as D}from"./ConfirmationModal.a57ef0ea.js";import{J as v}from"./DialogModal.15a46057.js";import{I as k}from"./InertiaButton.8127fa1b.js";import{J as C}from"./JigToggle.9257d87b.js";import{D as J,J as I}from"./DtComponent.983cc9f2.js";import{D as N}from"./DisplayMixin.328c366f.js";import P from"./ShowForm.468c93b0.js";import{e as a,o as m,f as h,w as s,g as i,x as n,z as _,k as f,C as p,i as l,y as A}from"./vendor.f8a6287f.js";import{_ as B}from"./plugin-vue_export-helper.5a098b48.js";import"./ApplicationLogo.99a0e64a.js";import"./main.06e28b58.js";import"./JigDd.81cc9e9e.js";const S={name:"PermissionsIndex",components:{DtComponent:J,JigToggle:C,InertiaButton:k,JetConfirmationModal:D,JetDialogModal:v,JigModal:I,JigLayout:j,ShowPermissionsForm:P},props:{can:Object,columns:Array},inject:["$refreshDt","$dayjs"],data(){return{tableId:"permissions-dt",tableParams:{},datatable:null,confirmDelete:!1,currentModel:null,withDisabled:!1,showModal:!1}},mixins:[N],mounted(){},computed:{ajaxUrl(){return new URL(this.route("api.permissions.dt")).href}},methods:{showModel(e){axios.get(route("api.permissions.show",e)).then(o=>{this.currentModel=o.data.payload,this.showModal=!0})},editModel(e){this.$inertia.visit(this.route("admin.permissions.edit",e.id))},confirmDeletion(e){this.currentModel=e,this.confirmDelete=!0},cancelDelete(){this.currentModel=!1,this.confirmDelete=!1},async deleteModel(){const e=this;this.confirmDelete=!1,this.currentModel&&this.$inertia.delete(route("admin.permissions.destroy",e.currentModel),{onFinish:o=>{this.displayNotification("success","Item deleted."),e.$refreshDt(e.tableId)},onError:o=>{console.log(o),this.displayNotification("error","There was an error while deleting the item.")}})},async toggleActivation(e,o){console.log(e),axios.put(route("api.permissions.update",o.id),{enabled:e}).then(d=>{this.displayNotification("success",d.data.message),this.$refreshDt(this.tableId)})}}},L={class:"flex flex-wrap items-center justify-between w-full px-4"},E=i("i",{class:"fas fa-arrow-left"},null,-1),T=l(" Retour"),V={class:"flex gap-x-2"},z=i("i",{class:"fas fa-plus"},null,-1),F=l(" New Permission"),R=i("i",{class:"fas fa-redo"},null,-1),U=l(" Refresh"),Y={key:0,class:"flex flex-wrap px-4"},O={class:"z-10 flex-auto bg-white md:rounded-md md:shadow-md"},q=i("h3",{class:"w-full p-4 mb-2 text-lg font-black sm:rounded-t-lg bg-primary-100"},[i("i",{class:"mr-2 fas fa-bars"}),l(" List of All Permissions")],-1),G={class:"p-4"},H=i("div",null,"Are you sure you want to delete this record?",-1),K={class:"flex justify-end gap-x-2"},Q=l("Cancel"),W=l("Yes, Delete"),X={key:0},Z=l("Close"),$={key:1,class:"p-4 font-bold text-red-500 bg-red-100 rounded-md shadow-md"};function ee(e,o,d,oe,t,r){const g=a("inertia-link"),c=a("inertia-button"),b=a("dt-component"),w=a("jet-confirmation-modal"),x=a("show-permissions-form"),M=a("jig-modal"),y=a("jig-layout");return m(),h(y,null,{header:s(()=>[i("div",L,[n(g,{href:e.route("admin.dashboard"),class:"text-xl font-black text-white"},{default:s(()=>[E,T]),_:1},8,["href"]),i("div",V,[d.can.create?(m(),h(c,{key:0,href:e.route("admin.permissions.create"),classes:"bg-green-100 hover:bg-green-200 text-primary"},{default:s(()=>[z,F]),_:1},8,["href"])):_("",!0),n(c,{onClick:o[0]||(o[0]=u=>r.$refreshDt(t.tableId)),classes:"bg-green-100 hover:bg-green-200 text-green"},{default:s(()=>[R,U]),_:1})])])]),default:s(()=>[d.can.viewAny?(m(),f("div",Y,[i("div",O,[q,i("div",G,[n(b,{"table-id":t.tableId,"ajax-url":r.ajaxUrl,columns:d.columns,"ajax-params":t.tableParams,onShowModel:r.showModel,onEditModel:r.editModel,onDeleteModel:r.confirmDeletion},null,8,["table-id","ajax-url","columns","ajax-params","onShowModel","onEditModel","onDeleteModel"])]),n(w,{title:"Confirm Deletion",show:t.confirmDelete},{content:s(()=>[H]),footer:s(()=>[i("div",K,[n(c,{as:"button",type:"button",onClick:p(r.cancelDelete,["stop"]),class:"bg-red-500"},{default:s(()=>[Q]),_:1},8,["onClick"]),n(c,{as:"button",type:"button",onClick:p(r.deleteModel,["prevent"]),class:"bg-green-500"},{default:s(()=>[W]),_:1},8,["onClick"])])]),_:1},8,["show"]),t.showModal&&t.currentModel?(m(),f("div",X,[n(M,{show:t.showModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:o[2]||(o[2]=u=>{t.currentModel=null,t.showModal=!1})},{title:s(()=>[l("Show Permission #"+A(t.currentModel.id),1)]),footer:s(()=>[n(c,{class:"px-4 text-white bg-primary",onClick:o[1]||(o[1]=u=>{t.showModal=!1,t.currentModel=null})},{default:s(()=>[Z]),_:1})]),default:s(()=>[n(x,{model:t.currentModel},null,8,["model"])]),_:1},8,["show"])])):_("",!0)])])):(m(),f("div",$," You are not authorized to view a list of Permissions "))]),_:1})}var _e=B(S,[["render",ee]]);export{_e as default};
