import{J as v}from"./JigLayout.5f650382.js";import{J as k}from"./ConfirmationModal.bfd904bd.js";import{J as D}from"./DialogModal.c74b5b77.js";import{I as $}from"./InertiaButton.b06aab18.js";import{J as I}from"./JigToggle.39822736.js";import{D as J,J as x}from"./DtComponent.af4d0e26.js";import{D as S}from"./DisplayMixin.328c366f.js";import N from"./ShowForm.e902f884.js";import{j as E,e as c,o as a,f as m,w as o,g as n,x as s,z as l,k as r,i as t,y as d,C as b}from"./vendor.bec00c62.js";import{J as F}from"./JigDd.6b7b5a1f.js";import A from"./CreateForm.551dc997.js";import{_ as B}from"./plugin-vue_export-helper.5a098b48.js";import"./ApplicationLogo.0294935d.js";import"./main.e85b79d9.js";import"./ShowForm.1217451c.js";import"./ShowForm.503bfef2.js";import"./JigDatepicker.db423e32.js";import"./vue-flatpickr.min.9065625b.js";import"./Input.a6112c10.js";import"./InfiniteSelect.744baeaa.js";import"./Label.be169a38.js";import"./InputError.aee3d62e.js";import"./JigTextarea.b8a999f8.js";const L=E({name:"Index",components:{DtComponent:J,JigToggle:I,InertiaButton:$,JetConfirmationModal:k,JetDialogModal:D,JigModal:x,JigLayout:v,ShowConsultationsForm:N,JigDd:F,CreateConsultationsForm:A},props:{can:Object,columns:Array,fichier:Object},inject:["$refreshDt","$dayjs"],data(){return{tableId:"consultations-dt",tableParams:{},datatable:null,confirmDelete:!1,currentModel:null,withDisabled:!1,showModal:!1,extends_info:!1,addConsultationModal:!1}},mixins:[S],mounted(){},computed:{ajaxUrl(){const e=new URL(this.route("api.consultations.dt"));return this.fichier&&e.searchParams.append("fichier_id",this.fichier.id),e.href}},methods:{addConsultation(){this.$inertia.visit(this.route("admin.consultations.create",{fichier_id:this.fichier?this.fichier.id:null}))},showModel(e){axios.get(route("api.consultations.show",e)).then(i=>{this.currentModel=i.data.payload,this.showModal=!0})},editModel(e){this.$inertia.visit(this.route("admin.consultations.edit",e.id))},manageModel(e){this.$inertia.visit(this.route("admin.consultations.manage",e.id))},expandInfo(){this.extends_info=!this.extends_info},confirmDeletion(e){this.currentModel=e,this.confirmDelete=!0},cancelDelete(){this.currentModel=!1,this.confirmDelete=!1},addSuccess(){this.displayNotification("success",msg),this.addConsultationModal=!1,this.$refreshDt(this.tableId)},addError(e){this.displayNotification("error",e)},async deleteModel(){const e=this;this.confirmDelete=!1,this.currentModel&&this.$inertia.delete(route("admin.consultations.destroy",e.currentModel),{onFinish:i=>{this.displayNotification("success","Item deleted."),e.$refreshDt(e.tableId)},onError:i=>{console.log(i),this.displayNotification("error","There was an error while deleting the item.")}})},async toggleActivation(e,i){console.log(e),axios.put(route("api.consultations.update",i.id),{enabled:e}).then(p=>{this.displayNotification("success",p.data.message),this.$refreshDt(this.tableId)})}}}),P={class:"flex flex-wrap items-center justify-between w-full px-4"},T=n("i",{class:"fas fa-arrow-left"},null,-1),V=t(" Retour"),z={class:"flex gap-x-2"},R=n("i",{class:"fas fa-plus"},null,-1),U=t(" Nouveau Consultation"),O=n("i",{class:"fas fa-redo"},null,-1),Y=t(" Refresh"),W={key:0,class:"flex flex-wrap px-4"},q={class:"z-10 flex-auto bg-white md:rounded-md md:shadow-md"},G={class:"w-full p-4 mb-2 text-lg font-black sm:rounded-t-lg bg-primary-100"},H=n("i",{class:"mr-2 fas fa-bars"},null,-1),K=t(" List Des Consultations "),Q={key:0,class:"inline-block"},X={key:0,class:"fas fa-angle-down"},Z={key:1,class:"fas fa-angle-up"},ee={key:0,class:"gap-4 p-4"},oe={key:0,class:"flex"},te=t("Nom:"),se=t("Prenom:"),ie={class:"flex"},ne=t("Phone:"),ae=t("Email:"),le={class:"flex"},re=t("Cin:"),de=t("Ddn:"),ce={class:"flex"},fe=t("Adresse:"),ue=t("Fichiers:"),he={class:"p-4"},me=n("div",null,"Are you sure you want to delete this record?",-1),pe={class:"flex justify-end gap-x-2"},_e=t("Cancel"),ge=t("Yes, Delete"),be={key:1},we=t("Close"),Me={key:2},je=t("Nouveau Consultation"),ye={key:1,class:"p-4 font-bold text-red-500 bg-red-100 rounded-md shadow-md"};function Ce(e,i,p,ve,ke,De){const _=c("inertia-link"),u=c("inertia-button"),f=c("jig-dd"),w=c("dt-component"),M=c("jet-confirmation-modal"),j=c("show-consultations-form"),g=c("jig-modal"),y=c("create-consultations-form"),C=c("jig-layout");return a(),m(C,null,{header:o(()=>[n("div",P,[s(_,{href:e.route("admin.dashboard"),class:"text-xl font-black text-white"},{default:o(()=>[T,V]),_:1},8,["href"]),n("div",z,[e.can.create?(a(),m(u,{key:0,onClick:e.addConsultation,classes:"bg-green-100 hover:bg-green-200 text-primary"},{default:o(()=>[R,U]),_:1},8,["onClick"])):l("",!0),s(u,{onClick:i[0]||(i[0]=h=>e.$refreshDt(e.tableId)),classes:"bg-indigo-100 hover:bg-green-200 text-indigo"},{default:o(()=>[O,Y]),_:1})])])]),default:o(()=>[e.can.viewAny?(a(),r("div",W,[n("div",q,[n("h3",G,[H,K,e.fichier?(a(),r("div",Q,[e.fichier.patient?(a(),m(_,{key:0,href:e.route("admin.patients.show",e.fichier.patient.id),class:"text-xl font-black text-primary"},{default:o(()=>[t(" : "+d(e.fichier.patient.title),1)]),_:1},8,["href"])):l("",!0),e.fichier.patient?(a(),r("button",{key:1,style:{"margin-top":"-5px"},type:"button",onClick:i[1]||(i[1]=h=>e.expandInfo()),class:"pl-2 pt-1 pb-1 pr-1 transition duration-150 ease-in-out"},[e.extends_info?l("",!0):(a(),r("i",X)),e.extends_info?(a(),r("i",Z)):l("",!0)])):l("",!0)])):l("",!0)]),e.fichier&&e.extends_info?(a(),r("dl",ee,[e.fichier.patient?(a(),r("div",oe,[s(f,{class:"flex-1"},{dt:o(()=>[te]),default:o(()=>[t(" "+d(e.fichier.patient.nom),1)]),_:1}),s(f,{class:"flex-1"},{dt:o(()=>[se]),default:o(()=>[t(" "+d(e.fichier.patient.prenom),1)]),_:1})])):l("",!0),n("div",ie,[s(f,{class:"flex-1"},{dt:o(()=>[ne]),default:o(()=>[t(" "+d(e.fichier.patient.phone),1)]),_:1}),s(f,{class:"flex-1"},{dt:o(()=>[ae]),default:o(()=>[t(" "+d(e.fichier.patient.email),1)]),_:1})]),n("div",le,[s(f,{class:"flex-1"},{dt:o(()=>[re]),default:o(()=>[t(" "+d(e.fichier.patient.cin),1)]),_:1}),s(f,{class:"flex-1"},{dt:o(()=>[de]),default:o(()=>[t(" "+d(e.fichier.patient.ddn),1)]),_:1})]),n("div",ce,[s(f,{class:"flex-1"},{dt:o(()=>[fe]),default:o(()=>[t(" "+d(e.fichier.patient.adresse),1)]),_:1}),s(f,{class:"flex-1"},{dt:o(()=>[ue]),default:o(()=>[t(" "+d(e.fichier.patient.count_fichiers),1)]),_:1})])])):l("",!0),n("div",he,[s(w,{"table-id":e.tableId,"ajax-url":e.ajaxUrl,columns:e.columns,"ajax-params":e.tableParams,onShowModel:e.showModel,onEditModel:e.editModel,onDeleteModel:e.confirmDeletion,onManageModel:e.manageModel},null,8,["table-id","ajax-url","columns","ajax-params","onShowModel","onEditModel","onDeleteModel","onManageModel"])]),s(M,{title:"Confirm Deletion",show:e.confirmDelete},{content:o(()=>[me]),footer:o(()=>[n("div",pe,[s(u,{as:"button",type:"button",onClick:b(e.cancelDelete,["stop"]),class:"bg-red-500"},{default:o(()=>[_e]),_:1},8,["onClick"]),s(u,{as:"button",type:"button",onClick:b(e.deleteModel,["prevent"]),class:"bg-green-500"},{default:o(()=>[ge]),_:1},8,["onClick"])])]),_:1},8,["show"]),e.showModal&&e.currentModel?(a(),r("div",be,[s(g,{show:e.showModal,maxWidthClass:"max-w-7xl","corner-class":"rounded-lg","position-class":"align-middle",onClose:i[3]||(i[3]=h=>{e.currentModel=null,e.showModal=!1})},{title:o(()=>[t("Show Consultation #"+d(e.currentModel.id),1)]),footer:o(()=>[s(u,{class:"px-4 text-white bg-primary",onClick:i[2]||(i[2]=h=>{e.showModal=!1,e.currentModel=null})},{default:o(()=>[we]),_:1})]),default:o(()=>[s(j,{model:e.currentModel},null,8,["model"])]),_:1},8,["show"])])):l("",!0),e.addConsultationModal?(a(),r("div",Me,[s(g,{show:e.addConsultationModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:i[4]||(i[4]=h=>e.addConsultationModal=!1)},{title:o(()=>[je]),default:o(()=>[s(y,{fichier:e.fichier,onSuccess:e.onSuccess,onError:e.onError},null,8,["fichier","onSuccess","onError"])]),_:1},8,["show"])])):l("",!0)])])):(a(),r("div",ye," You are not authorized to view a list of Consultations "))]),_:1})}var Ke=B(L,[["render",Ce]]);export{Ke as default};
