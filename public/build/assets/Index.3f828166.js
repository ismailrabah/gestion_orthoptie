import{J as D}from"./JigLayout.473189ee.js";import{J as F}from"./ConfirmationModal.bfd904bd.js";import{J as k}from"./DialogModal.c74b5b77.js";import{I as C}from"./InertiaButton.b06aab18.js";import{J as I}from"./JigToggle.39822736.js";import{D as J,J as P}from"./DtComponent.a2d90de5.js";import{D as S}from"./DisplayMixin.328c366f.js";import R from"./ShowForm.0bde2b62.js";import{K as U,e as n,o as c,f as p,w as l,g as o,x as i,z as h,k as f,C as _,i as a,y as N}from"./vendor.bec00c62.js";import{J as B}from"./Label.be169a38.js";import{I as L}from"./InfiniteSelect.744baeaa.js";import{_ as V}from"./plugin-vue_export-helper.5a098b48.js";import"./ApplicationLogo.0294935d.js";import"./main.2c2bf9ef.js";import"./JigDd.6b7b5a1f.js";const A={name:"Index",components:{DtComponent:J,JigToggle:I,InertiaButton:C,JetConfirmationModal:F,JetDialogModal:k,JigModal:P,JigLayout:D,ShowUsersForm:R,JetLabel:B,InfiniteSelect:L},props:{can:Object,columns:Array},inject:["$refreshDt","$dayjs"],data(){return{tableId:"users-dt",tableParams:{role_id:null},datatable:null,confirmDelete:!1,currentModel:null,withDisabled:!1,showModal:!1,filters_expanded:!1,tableParamsForm:U({role:null},{remember:!1})}},mixins:[S],mounted(){},computed:{ajaxUrl(){return new URL(this.route("api.users.dt")).href}},methods:{showModel(t){axios.get(route("api.users.show",t)).then(e=>{this.currentModel=e.data.payload,this.showModal=!0})},editModel(t){this.$inertia.visit(this.route("admin.users.edit",t.id))},expandFilters(){this.filters_expanded=!this.filters_expanded},confirmDeletion(t){this.currentModel=t,this.confirmDelete=!0},cancelDelete(){this.currentModel=!1,this.confirmDelete=!1},async deleteModel(){const t=this;this.confirmDelete=!1,this.currentModel&&this.$inertia.delete(route("admin.users.destroy",t.currentModel),{onFinish:e=>{this.displayNotification("success","Item deleted."),t.$refreshDt(t.tableId)},onError:e=>{console.log(e),this.displayNotification("error","There was an error while deleting the item.")}})},async toggleActivation(t,e){console.log(t),axios.put(route("api.users.update",e.id),{enabled:t}).then(u=>{this.displayNotification("success",u.data.message),this.$refreshDt(this.tableId)})},selectedRoleFilter(){console.log(this.tableParamsForm.role),this.tableParams.role_id=this.tableParamsForm.role?this.tableParamsForm.role.id:null,this.$refreshDt(this.tableId)},submmitFilters(){this.tableParams.role_id=this.tableParamsForm.role?this.tableParamsForm.role.id:null,this.$refreshDt(this.tableId)},ResetFillters(){this.tableParams.role_id=null,this.tableParamsForm.role=null,this.$refreshDt(this.tableId)}}},O={class:"flex flex-wrap items-center justify-between w-full px-4"},E=o("i",{class:"fas fa-arrow-left"},null,-1),T=a(" Back"),z={class:"flex gap-x-2"},Y=o("i",{class:"fas fa-plus"},null,-1),K=a(" New User"),q=o("i",{class:"fas fa-redo"},null,-1),G=a(" Refresh"),H={key:0,class:"flex flex-wrap px-4"},Q={class:"z-10 flex-auto bg-white md:rounded-md md:shadow-md"},W={class:"w-full p-4 mb-2 text-lg font-black sm:rounded-t-lg bg-primary-100"},X=o("i",{class:"mr-2 fas fa-bars"},null,-1),Z=a(" List of All Users "),$=o("i",{class:"mr-2 fas fa-filter"},null,-1),ee=[$],te={key:0,class:"p-4 transition-all bg-indigo-50"},oe={class:"flex"},se={class:"flex-1 mr-2"},le={class:"w-full max-w-md"},ie={class:"flex-none"},re=a("Reset"),ae=a("Submit"),ne={class:"p-4"},de=o("div",null,"Are you sure you want to delete this record?",-1),me={class:"flex justify-end gap-x-2"},ce=a("Cancel"),ue=a("Yes, Delete"),fe={key:1},he=a("Close"),_e={key:1,class:"p-4 font-bold text-red-500 bg-red-100 rounded-md shadow-md"};function pe(t,e,u,be,s,r){const b=n("inertia-link"),m=n("inertia-button"),g=n("jet-label"),x=n("infinite-select"),w=n("dt-component"),y=n("jet-confirmation-modal"),v=n("show-users-form"),M=n("jig-modal"),j=n("jig-layout");return c(),p(j,{class:"bg-gray-100"},{header:l(()=>[o("div",O,[i(b,{href:t.route("admin.dashboard"),class:"text-xl font-black text-white"},{default:l(()=>[E,T]),_:1},8,["href"]),o("div",z,[u.can.create?(c(),p(m,{key:0,href:t.route("admin.users.create"),classes:"bg-green-100 hover:bg-green-200 text-primary"},{default:l(()=>[Y,K]),_:1},8,["href"])):h("",!0),i(m,{onClick:e[0]||(e[0]=d=>r.$refreshDt(s.tableId)),classes:"bg-green-100 hover:bg-green-200 text-green"},{default:l(()=>[q,G]),_:1})])])]),default:l(()=>[u.can.viewAny?(c(),f("div",H,[o("div",Q,[o("h3",W,[X,Z,o("button",{style:{"margin-top":"-5px"},type:"button",onClick:e[1]||(e[1]=d=>r.expandFilters()),class:"float-right pl-2 pt-1 pb-1 pr-1 bg-primary 0 text-white rounded hover:bg-primary-700 hover:shadow-lg focus:bg-primary-700 focus:shadow-lg active:bg-primary-800 active:shadow-lg transition duration-150 ease-in-out"},ee)]),s.filters_expanded?(c(),f("div",te,[o("form",{onSubmit:e[4]||(e[4]=_((...d)=>r.submmitFilters&&r.submmitFilters(...d),["prevent"]))},[o("div",oe,[o("div",se,[o("div",le,[i(g,{for:"role",value:"Role"}),i(x,{"per-page":15,"api-url":t.route("api.roles.index"),"onOption:selected":r.selectedRoleFilter,"onOption:deselected":t.deselectedRoleFilter,id:"role",name:"role",modelValue:s.tableParamsForm.role,"onUpdate:modelValue":e[2]||(e[2]=d=>s.tableParamsForm.role=d),label:"name"},null,8,["api-url","onOption:selected","onOption:deselected","modelValue"])])]),o("div",ie,[i(m,{type:"button",class:"mt-4 mr-4 text-white font-semibold bg-success disabled:opacity-25",onClick:e[3]||(e[3]=d=>r.ResetFillters())},{default:l(()=>[re]),_:1}),i(m,{type:"submit",class:"mt-4 mr-14 text-white font-semibold bg-primary disabled:opacity-25"},{default:l(()=>[ae]),_:1})])])],32)])):h("",!0),o("div",ne,[i(w,{"table-id":s.tableId,"ajax-url":r.ajaxUrl,columns:u.columns,"ajax-params":s.tableParams,onShowModel:r.showModel,onEditModel:r.editModel,onDeleteModel:r.confirmDeletion},null,8,["table-id","ajax-url","columns","ajax-params","onShowModel","onEditModel","onDeleteModel"])]),i(y,{title:"Confirm Deletion",show:s.confirmDelete},{content:l(()=>[de]),footer:l(()=>[o("div",me,[i(m,{as:"button",type:"button",onClick:_(r.cancelDelete,["stop"]),class:"bg-red-500"},{default:l(()=>[ce]),_:1},8,["onClick"]),i(m,{as:"button",type:"button",onClick:_(r.deleteModel,["prevent"]),class:"bg-green-500"},{default:l(()=>[ue]),_:1},8,["onClick"])])]),_:1},8,["show"]),s.showModal&&s.currentModel?(c(),f("div",fe,[i(M,{show:s.showModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:e[6]||(e[6]=d=>{s.currentModel=null,s.showModal=!1})},{title:l(()=>[a("Show User #"+N(s.currentModel.id),1)]),footer:l(()=>[i(m,{class:"px-4 text-white bg-primary",onClick:e[5]||(e[5]=d=>{s.showModal=!1,s.currentModel=null})},{default:l(()=>[he]),_:1})]),default:l(()=>[i(v,{model:s.currentModel},null,8,["model"])]),_:1},8,["show"])])):h("",!0)])])):(c(),f("div",_e," You are not authorized to view a list of Users "))]),_:1})}var Re=V(A,[["render",pe]]);export{Re as default};
