import{J as D}from"./JigLayout.f7fb3eec.js";import{J as F}from"./ConfirmationModal.8638169e.js";import{J as k}from"./DialogModal.5c215a75.js";import{I as C}from"./InertiaButton.19f70872.js";import{D as I,J as P,a as J}from"./DtComponent.e585cd4e.js";import{D as R}from"./DisplayMixin.328c366f.js";import S from"./ShowForm.fee091cb.js";import{K as U,e as n,o as c,f as p,w as l,g as t,x as i,z as h,k as f,C as _,i as a,y as N}from"./vendor.76a4f2da.js";import{J as B}from"./Label.738327b5.js";import{I as V}from"./InfiniteSelect.41f0c37f.js";import{_ as L}from"./plugin-vue_export-helper.5a098b48.js";import"./main.336b76f7.js";import"./JigDd.2089e2da.js";const A={name:"Index",components:{DtComponent:I,JigToggle:P,InertiaButton:C,JetConfirmationModal:F,JetDialogModal:k,JigModal:J,JigLayout:D,ShowUsersForm:S,JetLabel:B,InfiniteSelect:V},props:{can:Object,columns:Array},inject:["$refreshDt","$dayjs"],data(){return{tableId:"users-dt",tableParams:{role_id:null},datatable:null,confirmDelete:!1,currentModel:null,withDisabled:!1,showModal:!1,filters_expanded:!1,tableParamsForm:U({role:null},{remember:!1})}},mixins:[R],mounted(){},computed:{ajaxUrl(){return new URL(this.route("api.users.dt")).href}},methods:{showModel(s){axios.get(route("api.users.show",s)).then(e=>{this.currentModel=e.data.payload,this.showModal=!0})},editModel(s){this.$inertia.visit(this.route("admin.users.edit",s.id))},expandFilters(){this.filters_expanded=!this.filters_expanded},confirmDeletion(s){this.currentModel=s,this.confirmDelete=!0},cancelDelete(){this.currentModel=!1,this.confirmDelete=!1},async deleteModel(){const s=this;this.confirmDelete=!1,this.currentModel&&this.$inertia.delete(route("admin.users.destroy",s.currentModel),{onFinish:e=>{this.displayNotification("success","Item deleted."),s.$refreshDt(s.tableId)},onError:e=>{console.log(e),this.displayNotification("error","There was an error while deleting the item.")}})},async toggleActivation(s,e){console.log(s),axios.put(route("api.users.update",e.id),{enabled:s}).then(u=>{this.displayNotification("success",u.data.message),this.$refreshDt(this.tableId)})},selectedRoleFilter(){console.log(this.tableParamsForm.role),this.tableParams.role_id=this.tableParamsForm.role?this.tableParamsForm.role.id:null,this.$refreshDt(this.tableId)},deselectedRoleFilter(){this.tableParams.role_id=this.tableParamsForm.role?this.tableParamsForm.role.id:null,this.$refreshDt(this.tableId)},submmitFilters(){this.tableParams.role_id=this.tableParamsForm.role?this.tableParamsForm.role.id:null,this.$refreshDt(this.tableId)},ResetFillters(){this.tableParams.role_id=null,this.tableParamsForm.role=null,this.$refreshDt(this.tableId)}}},O={class:"flex flex-wrap items-center justify-between w-full px-4"},E=t("i",{class:"fas fa-arrow-left"},null,-1),z=a(" Back"),T={class:"flex gap-x-2"},Y=t("i",{class:"fas fa-plus"},null,-1),K=a(" New User"),q=t("i",{class:"fas fa-redo"},null,-1),G=a(" Refresh"),H={key:0,class:"flex flex-wrap px-4"},Q={class:"z-10 flex-auto bg-white md:rounded-md md:shadow-md"},W={class:"w-full p-4 mb-2 text-lg font-black sm:rounded-t-lg bg-primary-100"},X=t("i",{class:"mr-2 fas fa-bars"},null,-1),Z=a(" List of All Users "),$=t("i",{class:"mr-2 fas fa-filter"},null,-1),ee=[$],te={key:0,class:"p-4 transition-all bg-indigo-50"},se={class:"flex"},oe={class:"flex-1 mr-2"},le={class:"w-full max-w-md"},re={class:"flex-none"},ie=a("Reset"),ae=a("Submit"),ne={class:"p-4"},de=t("div",null,"Are you sure you want to delete this record?",-1),me={class:"flex justify-end gap-x-2"},ce=a("Cancel"),ue=a("Yes, Delete"),fe={key:1},he=a("Close"),_e={key:1,class:"p-4 font-bold text-red-500 bg-red-100 rounded-md shadow-md"};function pe(s,e,u,be,o,r){const b=n("inertia-link"),m=n("inertia-button"),g=n("jet-label"),x=n("infinite-select"),w=n("dt-component"),y=n("jet-confirmation-modal"),v=n("show-users-form"),M=n("jig-modal"),j=n("jig-layout");return c(),p(j,{class:"bg-gray-100"},{header:l(()=>[t("div",O,[i(b,{href:s.route("admin.dashboard"),class:"text-xl font-black text-white"},{default:l(()=>[E,z]),_:1},8,["href"]),t("div",T,[u.can.create?(c(),p(m,{key:0,href:s.route("admin.users.create"),classes:"bg-green-100 hover:bg-green-200 text-primary"},{default:l(()=>[Y,K]),_:1},8,["href"])):h("",!0),i(m,{onClick:e[0]||(e[0]=d=>r.$refreshDt(o.tableId)),classes:"bg-green-100 hover:bg-green-200 text-green"},{default:l(()=>[q,G]),_:1})])])]),default:l(()=>[u.can.viewAny?(c(),f("div",H,[t("div",Q,[t("h3",W,[X,Z,t("button",{style:{"margin-top":"-5px"},type:"button",onClick:e[1]||(e[1]=d=>r.expandFilters()),class:"float-right pl-2 pt-1 pb-1 pr-1 bg-primary 0 text-white rounded hover:bg-primary-700 hover:shadow-lg focus:bg-primary-700 focus:shadow-lg active:bg-primary-800 active:shadow-lg transition duration-150 ease-in-out"},ee)]),o.filters_expanded?(c(),f("div",te,[t("form",{onSubmit:e[4]||(e[4]=_((...d)=>r.submmitFilters&&r.submmitFilters(...d),["prevent"]))},[t("div",se,[t("div",oe,[t("div",le,[i(g,{for:"role",value:"Role"}),i(x,{"per-page":15,"api-url":s.route("api.roles.index"),"onOption:selected":r.selectedRoleFilter,"onOption:deselected":r.deselectedRoleFilter,id:"role",name:"role",modelValue:o.tableParamsForm.role,"onUpdate:modelValue":e[2]||(e[2]=d=>o.tableParamsForm.role=d),label:"name"},null,8,["api-url","onOption:selected","onOption:deselected","modelValue"])])]),t("div",re,[i(m,{type:"button",class:"mt-4 mr-4 text-white font-semibold bg-success disabled:opacity-25",onClick:e[3]||(e[3]=d=>r.ResetFillters())},{default:l(()=>[ie]),_:1}),i(m,{type:"submit",class:"mt-4 mr-14 text-white font-semibold bg-primary disabled:opacity-25"},{default:l(()=>[ae]),_:1})])])],32)])):h("",!0),t("div",ne,[i(w,{"table-id":o.tableId,"ajax-url":r.ajaxUrl,columns:u.columns,"ajax-params":o.tableParams,onShowModel:r.showModel,onEditModel:r.editModel,onDeleteModel:r.confirmDeletion},null,8,["table-id","ajax-url","columns","ajax-params","onShowModel","onEditModel","onDeleteModel"])]),i(y,{title:"Confirm Deletion",show:o.confirmDelete},{content:l(()=>[de]),footer:l(()=>[t("div",me,[i(m,{as:"button",type:"button",onClick:_(r.cancelDelete,["stop"]),class:"bg-red-500"},{default:l(()=>[ce]),_:1},8,["onClick"]),i(m,{as:"button",type:"button",onClick:_(r.deleteModel,["prevent"]),class:"bg-green-500"},{default:l(()=>[ue]),_:1},8,["onClick"])])]),_:1},8,["show"]),o.showModal&&o.currentModel?(c(),f("div",fe,[i(M,{show:o.showModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:e[6]||(e[6]=d=>{o.currentModel=null,o.showModal=!1})},{title:l(()=>[a("Show User #"+N(o.currentModel.id),1)]),footer:l(()=>[i(m,{class:"px-4 text-white bg-primary",onClick:e[5]||(e[5]=d=>{o.showModal=!1,o.currentModel=null})},{default:l(()=>[he]),_:1})]),default:l(()=>[i(v,{model:o.currentModel},null,8,["model"])]),_:1},8,["show"])])):h("",!0)])])):(c(),f("div",_e," You are not authorized to view a list of Users "))]),_:1})}var Je=L(A,[["render",pe]]);export{Je as default};
