import{J as F}from"./JigLayout.f9b138d2.js";import{J as k}from"./ConfirmationModal.e9c32feb.js";import{J as j}from"./DialogModal.a90c0402.js";import{I as C}from"./InertiaButton.f95f8f59.js";import{J as I}from"./JigToggle.7a09b550.js";import{D as P,J}from"./DtComponent.4a9e4628.js";import{D as R}from"./DisplayMixin.328c366f.js";import U from"./ShowForm.85af019e.js";import{z as N,r as n,o as c,c as p,w as l,a as o,l as r,m as h,e as f,q as _,b as a,t as S}from"./main.8d02089a.js";import{J as V}from"./Label.5467a800.js";import{I as B}from"./InfiniteSelect.05c26939.js";import{_ as A}from"./plugin-vue_export-helper.21dcd24c.js";import"./ApplicationLogo.e325ada5.js";import"./JigDd.55404d6b.js";import"./index.a8a3989e.js";const O={name:"Index",components:{DtComponent:P,JigToggle:I,InertiaButton:C,JetConfirmationModal:k,JetDialogModal:j,JigModal:J,JigLayout:F,ShowUsersForm:U,JetLabel:V,InfiniteSelect:B},props:{can:Object,columns:Array},inject:["$refreshDt","$dayjs"],data(){return{tableId:"users-dt",tableParams:{role_id:null},datatable:null,confirmDelete:!1,currentModel:null,withDisabled:!1,showModal:!1,filters_expanded:!1,tableParamsForm:N({role:null},{remember:!1})}},mixins:[R],mounted(){},computed:{ajaxUrl(){return new URL(this.route("api.users.dt")).href}},methods:{showModel(t){axios.get(route("api.users.show",t)).then(e=>{this.currentModel=e.data.payload,this.showModal=!0})},editModel(t){this.$inertia.visit(this.route("admin.users.edit",t.id))},expandFilters(){this.filters_expanded=!this.filters_expanded},confirmDeletion(t){this.currentModel=t,this.confirmDelete=!0},cancelDelete(){this.currentModel=!1,this.confirmDelete=!1},async deleteModel(){const t=this;this.confirmDelete=!1,this.currentModel&&this.$inertia.delete(route("admin.users.destroy",t.currentModel),{onFinish:e=>{this.displayNotification("success","Item deleted."),t.$refreshDt(t.tableId)},onError:e=>{console.log(e),this.displayNotification("error","There was an error while deleting the item.")}})},async toggleActivation(t,e){console.log(t),axios.put(route("api.users.update",e.id),{enabled:t}).then(u=>{this.displayNotification("success",u.data.message),this.$refreshDt(this.tableId)})},selectedRoleFilter(){console.log(this.tableParamsForm.role),this.tableParams.role_id=this.tableParamsForm.role?this.tableParamsForm.role.id:null,this.$refreshDt(this.tableId)},submmitFilters(){this.tableParams.role_id=this.tableParamsForm.role?this.tableParamsForm.role.id:null,this.$refreshDt(this.tableId)},ResetFillters(){this.tableParams.role_id=null,this.tableParamsForm.role=null,this.$refreshDt(this.tableId)}}},E={class:"flex flex-wrap items-center justify-between w-full px-4"},L=o("i",{class:"fas fa-arrow-left"},null,-1),z=a(" Back"),T={class:"flex gap-x-2"},Y=o("i",{class:"fas fa-plus"},null,-1),q=a(" New User"),G=o("i",{class:"fas fa-redo"},null,-1),H=a(" Refresh"),K={key:0,class:"flex flex-wrap px-4"},Q={class:"z-10 flex-auto bg-white md:rounded-md md:shadow-md"},W={class:"w-full p-4 mb-2 text-lg font-black sm:rounded-t-lg bg-primary-100"},X=o("i",{class:"mr-2 fas fa-bars"},null,-1),Z=a(" List of All Users "),$=o("i",{class:"mr-2 fas fa-filter"},null,-1),ee=[$],te={key:0,class:"p-4 transition-all bg-indigo-50"},oe={class:"flex"},se={class:"flex-1 mr-2"},le={class:"w-full max-w-md"},re={class:"flex-none"},ie=a("Reset"),ae=a("Submit"),ne={class:"p-4"},de=o("div",null,"Are you sure you want to delete this record?",-1),me={class:"flex justify-end gap-x-2"},ce=a("Cancel"),ue=a("Yes, Delete"),fe={key:1},he=a("Close"),_e={key:1,class:"p-4 font-bold text-red-500 bg-red-100 rounded-md shadow-md"};function pe(t,e,u,be,s,i){const b=n("inertia-link"),m=n("inertia-button"),g=n("jet-label"),w=n("infinite-select"),x=n("dt-component"),y=n("jet-confirmation-modal"),v=n("show-users-form"),M=n("jig-modal"),D=n("jig-layout");return c(),p(D,{class:"bg-gray-100"},{header:l(()=>[o("div",E,[r(b,{href:t.route("admin.dashboard"),class:"text-xl font-black text-white"},{default:l(()=>[L,z]),_:1},8,["href"]),o("div",T,[u.can.create?(c(),p(m,{key:0,href:t.route("admin.users.create"),classes:"bg-green-100 hover:bg-green-200 text-primary"},{default:l(()=>[Y,q]),_:1},8,["href"])):h("",!0),r(m,{onClick:e[0]||(e[0]=d=>i.$refreshDt(s.tableId)),classes:"bg-green-100 hover:bg-green-200 text-green"},{default:l(()=>[G,H]),_:1})])])]),default:l(()=>[u.can.viewAny?(c(),f("div",K,[o("div",Q,[o("h3",W,[X,Z,o("button",{style:{"margin-top":"-5px"},type:"button",onClick:e[1]||(e[1]=d=>i.expandFilters()),class:"float-right pl-2 pt-1 pb-1 pr-1 bg-primary 0 text-white rounded hover:bg-primary-700 hover:shadow-lg focus:bg-primary-700 focus:shadow-lg active:bg-primary-800 active:shadow-lg transition duration-150 ease-in-out"},ee)]),s.filters_expanded?(c(),f("div",te,[o("form",{onSubmit:e[4]||(e[4]=_((...d)=>i.submmitFilters&&i.submmitFilters(...d),["prevent"]))},[o("div",oe,[o("div",se,[o("div",le,[r(g,{for:"role",value:"Role"}),r(w,{"per-page":15,"api-url":t.route("api.roles.index"),"onOption:selected":i.selectedRoleFilter,"onOption:deselected":t.deselectedRoleFilter,id:"role",name:"role",modelValue:s.tableParamsForm.role,"onUpdate:modelValue":e[2]||(e[2]=d=>s.tableParamsForm.role=d),label:"name"},null,8,["api-url","onOption:selected","onOption:deselected","modelValue"])])]),o("div",re,[r(m,{type:"button",class:"mt-4 mr-4 text-white font-semibold bg-success disabled:opacity-25",onClick:e[3]||(e[3]=d=>i.ResetFillters())},{default:l(()=>[ie]),_:1}),r(m,{type:"submit",class:"mt-4 mr-14 text-white font-semibold bg-primary disabled:opacity-25"},{default:l(()=>[ae]),_:1})])])],32)])):h("",!0),o("div",ne,[r(x,{"table-id":s.tableId,"ajax-url":i.ajaxUrl,columns:u.columns,"ajax-params":s.tableParams,onShowModel:i.showModel,onEditModel:i.editModel,onDeleteModel:i.confirmDeletion},null,8,["table-id","ajax-url","columns","ajax-params","onShowModel","onEditModel","onDeleteModel"])]),r(y,{title:"Confirm Deletion",show:s.confirmDelete},{content:l(()=>[de]),footer:l(()=>[o("div",me,[r(m,{as:"button",type:"button",onClick:_(i.cancelDelete,["stop"]),class:"bg-red-500"},{default:l(()=>[ce]),_:1},8,["onClick"]),r(m,{as:"button",type:"button",onClick:_(i.deleteModel,["prevent"]),class:"bg-green-500"},{default:l(()=>[ue]),_:1},8,["onClick"])])]),_:1},8,["show"]),s.showModal&&s.currentModel?(c(),f("div",fe,[r(M,{show:s.showModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:e[6]||(e[6]=d=>{s.currentModel=null,s.showModal=!1})},{title:l(()=>[a("Show User #"+S(s.currentModel.id),1)]),footer:l(()=>[r(m,{class:"px-4 text-white bg-primary",onClick:e[5]||(e[5]=d=>{s.showModal=!1,s.currentModel=null})},{default:l(()=>[he]),_:1})]),default:l(()=>[r(v,{model:s.currentModel},null,8,["model"])]),_:1},8,["show"])])):h("",!0)])])):(c(),f("div",_e," You are not authorized to view a list of Users "))]),_:1})}var Ue=A(O,[["render",pe]]);export{Ue as default};
