import{J as D}from"./JigLayout.f9b138d2.js";import{J as E}from"./ConfirmationModal.e9c32feb.js";import{J as j}from"./DialogModal.a90c0402.js";import{I as A}from"./InertiaButton.f95f8f59.js";import{J as $}from"./JigToggle.7a09b550.js";import{D as I,J as N}from"./DtComponent.4a9e4628.js";import{D as R}from"./DisplayMixin.328c366f.js";import S from"./ShowForm.c8861c6f.js";import{d as J,r as d,o as a,c as m,w as t,a as c,l as n,m as l,e as r,q as _,b as h,t as T}from"./main.8d02089a.js";import{J as L}from"./JigDd.55404d6b.js";import U from"./ShowForm.4ceb319b.js";import P from"./CreateForm.ecdcc2b2.js";import B from"./EditForm.a98c98fd.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import"./ApplicationLogo.e325ada5.js";import"./index.a8a3989e.js";import"./ShowForm.17c12b97.js";import"./ShowForm.a1d83c73.js";import"./Checkbox.17e8b9e7.js";import"./Input.12512e43.js";import"./JigTextarea.93f58f67.js";import"./InfiniteSelect.05c26939.js";import"./Label.5467a800.js";import"./InputError.ef575259.js";const F=J({name:"Manage",components:{DtComponent:I,JigToggle:$,InertiaButton:A,JetConfirmationModal:E,JetDialogModal:j,JigModal:N,JigLayout:D,ShowConsultationTachesForm:S,JigDd:L,ShowConsultationsForm:U,CreateConsultationTachesForm:P,EditConsultationTachForm:B},props:{can:Object,tachesColumns:Array,consultation:Object},inject:["$refreshDt","$dayjs"],data(){return{tachesTableId:"consultation-taches-dt",tachesTableParams:{},datatable:null,confirmTacheDelete:!1,currentTacheModel:null,withDisabled:!1,showTacheModal:!1,showAddTacheModal:!1,showEditTacheModal:!1,extends_info:!1,extends_taches:!0}},mixins:[R],mounted(){},computed:{tachesAjaxUrl(){const e=new URL(this.route("api.consultation-taches.dt"));return this.consultation&&e.searchParams.append("consultation_id",this.consultation.id),e.href}},methods:{showTacheModel(e){axios.get(route("api.consultation-taches.show",e)).then(o=>{this.currentTacheModel=o.data.payload,this.showTacheModal=!0})},editTacheModel(e){axios.get(route("api.consultation-taches.show",e.id)).then(o=>{this.currentTacheModel=o.data.payload,this.showEditTacheModal=!0})},AddTache(){this.showAddTacheModal=!0},expandInfo(){this.extends_info=!this.extends_info},confirmTacheDeletion(e){this.currentTacheModel=e,this.confirmTacheDelete=!0},cancelTacheDelete(){this.currentTacheModel=!1,this.confirmTacheDelete=!1},async deleteTacheModel(){const e=this;this.confirmTacheDelete=!1,this.currentTacheModel&&this.$inertia.delete(route("admin.consultation-taches.destroy",e.currentTacheModel),{onFinish:o=>{this.displayNotification("success","Item deleted."),e.$refreshDt(e.tachesTableId)},onError:o=>{console.log(o),this.displayNotification("error","There was an error while deleting the item.")}})},async toggleActivation(e,o){axios.put(route("api.consultation-taches.update",o.id),{enabled:e}).then(i=>{this.displayNotification("success",i.data.message),this.$refreshDt(this.tachesTableId)})},onAddTacheSuccess(e){this.displayNotification("success",e),this.showAddTacheModal=!1,this.$refreshDt(this.tachesTableId)},onAddTacheError(e){this.displayNotification("error",e)},onSuccessEditTache(e){this.displayNotification("success",e),this.showEditTacheModal=!1,this.$refreshDt(this.tachesTableId)},onErrorEditTache(e){this.displayNotification("error",e)},async printInvoice(e){await axios.get(this.route("api.consultation-taches.print-invoice",{consultation_tache_id:e.id}),{responseType:"blob"}).then(o=>{this.displayNotification("success","Consultation Tache Invoice Printed");const i=new Blob([o.data],{type:"application/pdf"}),s=document.createElement("a");s.href=URL.createObjectURL(i),s.download="consultation-tache-invoice.pdf",s.click(),URL.revokeObjectURL(s.href)}).catch(o=>{var i,s;this.displayNotification("error",((s=(i=o.response)==null?void 0:i.data)==null?void 0:s.message)||o.message||o)}).finally(o=>{})},async printReport(e){await axios.get(this.route("api.consultations-taches.print-report",{consultation_tache_id:e.id}),{responseType:"blob"}).then(o=>{this.displayNotification("success","Consultation Tache Report Printed");const i=new Blob([o.data],{type:"application/pdf"}),s=document.createElement("a");s.href=URL.createObjectURL(i),s.download="consultation-tache-report.pdf",s.click(),URL.revokeObjectURL(s.href)}).catch(o=>{var i,s;this.displayNotification("error",((s=(i=o.response)==null?void 0:i.data)==null?void 0:s.message)||o.message||o)}).finally(o=>{})}}}),x={class:"flex flex-wrap items-center justify-between w-full px-4"},V=c("i",{class:"fas fa-arrow-left"},null,-1),z=h(" Retour"),Y={class:"flex gap-x-2"},q=c("i",{class:"fas fa-plus"},null,-1),G=h(" Ajouter une t\xE2che "),W={key:0,class:"flex flex-wrap px-4"},H={class:"z-10 flex-auto bg-white md:rounded-md md:shadow-md"},K={class:"w-full p-4 text-lg font-black sm:rounded-t-lg bg-primary-200"},Q=c("i",{class:"mr-2 fas fa-briefcase-medical text-black"},null,-1),X=h("Gestion de Consultation "),Z={key:0,class:"fas fa-angle-down"},ee={key:1,class:"fas fa-angle-up"},oe={key:0,class:"gap-4 p-4"},te={class:"w-full p-4 text-lg font-black bg-info-100"},se=c("i",{class:"mr-2 fas fa-tasks"},null,-1),ae=h(" List des t\xE2ches "),ne={key:0,class:"fas fa-angle-down"},ie={key:1,class:"fas fa-angle-up"},le={key:1,class:"p-4"},re=c("div",null,"Are you sure you want to delete this record?",-1),ce={class:"flex justify-end gap-x-2"},de=h("Cancel"),he=h("Yes, Delete"),ue={key:2},pe=h("Close"),fe={key:3},me={key:4},Te=h("Ajouter une t\xE2che "),we={key:1,class:"p-4 font-bold text-red-500 bg-red-100 rounded-md shadow-md"};function _e(e,o,i,s,be,ye){const w=d("inertia-link"),p=d("inertia-button"),b=d("show-consultations-form"),y=d("dt-component"),g=d("jet-confirmation-modal"),M=d("show-consultation-taches-form"),f=d("jig-modal"),k=d("edit-consultation-tach-form"),C=d("create-consultation-taches-form"),v=d("jig-layout");return a(),m(v,null,{header:t(()=>[c("div",x,[n(w,{href:e.route("admin.consultations.index"),class:"text-xl font-black text-white"},{default:t(()=>[V,z]),_:1},8,["href"]),c("div",Y,[e.can.create?(a(),m(p,{key:0,onClick:e.AddTache,classes:"bg-green-100 hover:bg-green-200 text-primary"},{default:t(()=>[q,G]),_:1},8,["onClick"])):l("",!0)])])]),default:t(()=>[e.can.viewAny?(a(),r("div",W,[c("div",H,[c("h3",K,[Q,e.consultation?(a(),m(w,{key:0,href:e.route("admin.consultations.show",e.consultation.id),class:"text-xl font-black text-primary"},{default:t(()=>[X]),_:1},8,["href"])):l("",!0),e.consultation?(a(),r("button",{key:1,style:{"margin-top":"-5px"},type:"button",onClick:o[0]||(o[0]=u=>e.expandInfo()),class:"pl-2 pt-1 pb-1 pr-1 transition duration-150 ease-in-out"},[e.extends_info?l("",!0):(a(),r("i",Z)),e.extends_info?(a(),r("i",ee)):l("",!0)])):l("",!0)]),e.consultation&&e.extends_info?(a(),r("dl",oe,[n(b,{model:e.consultation},null,8,["model"])])):l("",!0),c("h3",te,[se,ae,c("button",{onClick:o[1]||(o[1]=u=>e.extends_taches=!e.extends_taches),class:"pl-2 pt-1 pb-1 pr-1 transition duration-150 ease-in-out"},[e.extends_taches?l("",!0):(a(),r("i",ne)),e.extends_taches?(a(),r("i",ie)):l("",!0)])]),e.extends_taches?(a(),r("div",le,[n(y,{"table-id":e.tachesTableId,"ajax-url":e.tachesAjaxUrl,columns:e.tachesColumns,"ajax-params":e.tachesTableParams,onShowModel:e.showTacheModel,onEditModel:e.editTacheModel,onDeleteModel:e.confirmTacheDeletion,onPrintInvoice:e.printInvoice,onPrintReport:e.printReport},null,8,["table-id","ajax-url","columns","ajax-params","onShowModel","onEditModel","onDeleteModel","onPrintInvoice","onPrintReport"])])):l("",!0),n(g,{title:"Confirm Deletion",show:e.confirmTacheDelete},{content:t(()=>[re]),footer:t(()=>[c("div",ce,[n(p,{as:"button",type:"button",onClick:_(e.cancelTacheDelete,["stop"]),class:"bg-red-500"},{default:t(()=>[de]),_:1},8,["onClick"]),n(p,{as:"button",type:"button",onClick:_(e.deleteTacheModel,["prevent"]),class:"bg-green-500"},{default:t(()=>[he]),_:1},8,["onClick"])])]),_:1},8,["show"]),e.showTacheModal&&e.currentTacheModel?(a(),r("div",ue,[n(f,{show:e.showTacheModal,maxWidthClass:"max-w-7xl","corner-class":"rounded-lg","position-class":"align-middle",onClose:o[3]||(o[3]=u=>{e.currentTacheModel=null,e.showTacheModal=!1})},{title:t(()=>[h("Show Consultation Tach #"+T(e.currentTacheModel.id),1)]),footer:t(()=>[n(p,{class:"px-4 text-white bg-primary",onClick:o[2]||(o[2]=u=>{e.showTacheModal=!1,e.currentTacheModel=null})},{default:t(()=>[pe]),_:1})]),default:t(()=>[n(M,{model:e.currentTacheModel},null,8,["model"])]),_:1},8,["show"])])):l("",!0),e.showEditTacheModal&&e.currentTacheModel?(a(),r("div",fe,[n(f,{show:e.showEditTacheModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:o[4]||(o[4]=u=>{e.currentTacheModel=null,e.showEditTacheModal=!1})},{title:t(()=>[h("Edit Consultation Tach #"+T(e.currentTacheModel.consultation_id)+" / "+T(e.currentTacheModel.tache_id),1)]),default:t(()=>[n(k,{model:e.currentTacheModel,onSuccess:e.onSuccessEditTache,onError:e.onErrorEditTache},null,8,["model","onSuccess","onError"])]),_:1},8,["show"])])):l("",!0),e.showAddTacheModal&&e.consultation?(a(),r("div",me,[n(f,{show:e.showAddTacheModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:o[5]||(o[5]=u=>e.showAddTacheModal=!1)},{title:t(()=>[Te]),default:t(()=>[n(C,{consultation:e.consultation,onSuccess:e.onAddTacheSuccess,onError:e.onAddTacheError},null,8,["consultation","onSuccess","onError"])]),_:1},8,["show"])])):l("",!0)])])):(a(),r("div",we," You are not authorized to view a list of Consultations "))]),_:1})}var Ye=O(F,[["render",_e]]);export{Ye as default};
