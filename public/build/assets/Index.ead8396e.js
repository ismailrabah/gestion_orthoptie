import{J as k}from"./JigLayout.e82f0bb4.js";import{J as C}from"./ConfirmationModal.5a11536f.js";import{J as j}from"./DialogModal.72809756.js";import{I as $}from"./InertiaButton.be6c5563.js";import{J as I}from"./JigToggle.39ad9fc4.js";import{D as F,J as x}from"./DtComponent.2a9d4abf.js";import{D as J}from"./DisplayMixin.328c366f.js";import N from"./ShowForm.55392e13.js";import{d as S,r as d,o as a,c as m,w as t,a as n,l as s,m as c,e as f,b as o,t as l,q as w}from"./main.22e9d17e.js";import{J as E}from"./JigDd.8f6e598d.js";import A from"./CreateForm.ab6b580e.js";import{_ as B}from"./plugin-vue_export-helper.21dcd24c.js";import"./ApplicationLogo.5afbd481.js";import"./index.a8a3989e.js";import"./Input.566bfc0e.js";import"./JigTextarea.9ad74d09.js";import"./InfiniteSelect.992094bf.js";import"./Label.7a352aa5.js";import"./InputError.e277e3fb.js";const P=S({name:"Index",components:{DtComponent:F,JigToggle:I,InertiaButton:$,JetConfirmationModal:C,JetDialogModal:j,JigModal:x,JigLayout:k,ShowFichiersForm:N,CreateFichiersForm:A,JigDd:E},props:{can:Object,columns:Array,patient:Object},inject:["$refreshDt","$dayjs"],data(){return{tableId:"fichiers-dt",tableParams:{},datatable:null,confirmDelete:!1,currentModel:null,withDisabled:!1,showModal:!1,addModal:!1,extends_info:!1}},mixins:[J],mounted(){},computed:{ajaxUrl(){const e=new URL(this.route("api.fichiers.dt"));return this.patient&&e.searchParams.append("patient_id",this.patient.id),e.href}},methods:{AddFichier(){this.addModal=!0},showModel(e){axios.get(route("api.fichiers.show",e)).then(i=>{this.currentModel=i.data.payload,this.showModal=!0})},showConsultations(e){this.$inertia.visit(this.route("admin.consultations.index",{fichier_id:e?e.id:null}))},editModel(e){this.$inertia.visit(this.route("admin.fichiers.edit",e.id))},expandInfo(){this.extends_info=!this.extends_info},confirmDeletion(e){this.currentModel=e,this.confirmDelete=!0},cancelDelete(){this.currentModel=!1,this.confirmDelete=!1},async deleteModel(){const e=this;this.confirmDelete=!1,this.currentModel&&this.$inertia.delete(route("admin.fichiers.destroy",e.currentModel),{onFinish:i=>{this.displayNotification("success","Item deleted."),e.$refreshDt(e.tableId)},onError:i=>{console.log(i),this.displayNotification("error","There was an error while deleting the item.")}})},async toggleActivation(e,i){console.log(e),axios.put(route("api.fichiers.update",i.id),{enabled:e}).then(p=>{this.displayNotification("success",p.data.message),this.$refreshDt(this.tableId)})},addSuccess(e){this.displayNotification("success",e),this.addModal=!1,this.$refreshDt(this.tableId)},addError(e){this.displayNotification("error",e),this.$refreshDt(this.tableId)}}}),V={class:"flex flex-wrap items-center justify-between w-full px-4"},L=n("i",{class:"fas fa-arrow-left"},null,-1),R=o(" Retour"),T={class:"flex gap-x-2"},U=n("i",{class:"fas fa-plus"},null,-1),z=o(" Nouveau Fichier"),O=n("i",{class:"fas fa-redo"},null,-1),Y=o(" Refresh"),q={key:0,class:"flex flex-wrap px-4"},G={class:"z-10 flex-auto bg-white md:rounded-md md:shadow-md"},H={class:"w-full p-4 mb-2 text-lg font-black sm:rounded-t-lg bg-primary-100"},K=n("i",{class:"mr-2 fas fa-bars"},null,-1),Q=o(" List Des Fichiers "),W={key:0,class:"fas fa-angle-down"},X={key:1,class:"fas fa-angle-up"},Z={key:0,class:"gap-4 p-4"},ee={class:"flex"},te=o("Nom:"),oe=o("Prenom:"),se={class:"flex"},ie=o("Phone:"),ne=o("Email:"),ae={class:"flex"},le=o("Cin:"),de=o("Ddn:"),re={class:"flex"},ce=o("Adresse:"),fe=o("Fichiers:"),he={class:"p-4"},ue=n("div",null,"Are you sure you want to delete this record?",-1),me={class:"flex justify-end gap-x-2"},pe=o("Cancel"),_e=o("Yes, Delete"),ge={key:1},we=o("Close"),be={key:2},Me=o("Nouveau Fichier"),ye={key:1,class:"p-4 font-bold text-red-500 bg-red-100 rounded-md shadow-md"};function ve(e,i,p,De,ke,Ce){const _=d("inertia-link"),h=d("inertia-button"),r=d("jig-dd"),b=d("dt-component"),M=d("jet-confirmation-modal"),y=d("show-fichiers-form"),g=d("jig-modal"),v=d("create-fichiers-form"),D=d("jig-layout");return a(),m(D,null,{header:t(()=>[n("div",V,[s(_,{href:e.route("admin.dashboard"),class:"text-xl font-black text-white"},{default:t(()=>[L,R]),_:1},8,["href"]),n("div",T,[e.can.create?(a(),m(h,{key:0,onClick:e.AddFichier,classes:"bg-green-100 hover:bg-green-200 text-primary"},{default:t(()=>[U,z]),_:1},8,["onClick"])):c("",!0),s(h,{onClick:i[0]||(i[0]=u=>e.$refreshDt(e.tableId)),classes:"bg-indigo-100 hover:bg-green-200 text-indigo"},{default:t(()=>[O,Y]),_:1})])])]),default:t(()=>[e.can.viewAny?(a(),f("div",q,[n("div",G,[n("h3",H,[K,Q,e.patient?(a(),m(_,{key:0,href:e.route("admin.patients.show",e.patient.id),class:"text-xl font-black text-primary"},{default:t(()=>[o(" : "+l(e.patient.title),1)]),_:1},8,["href"])):c("",!0),e.patient?(a(),f("button",{key:1,style:{"margin-top":"-5px"},type:"button",onClick:i[1]||(i[1]=u=>e.expandInfo()),class:"pl-2 pt-1 pb-1 pr-1 transition duration-150 ease-in-out"},[e.extends_info?c("",!0):(a(),f("i",W)),e.extends_info?(a(),f("i",X)):c("",!0)])):c("",!0)]),e.patient&&e.extends_info?(a(),f("dl",Z,[n("div",ee,[s(r,{class:"flex-1"},{dt:t(()=>[te]),default:t(()=>[o(" "+l(e.patient.nom),1)]),_:1}),s(r,{class:"flex-1"},{dt:t(()=>[oe]),default:t(()=>[o(" "+l(e.patient.prenom),1)]),_:1})]),n("div",se,[s(r,{class:"flex-1"},{dt:t(()=>[ie]),default:t(()=>[o(" "+l(e.patient.phone),1)]),_:1}),s(r,{class:"flex-1"},{dt:t(()=>[ne]),default:t(()=>[o(" "+l(e.patient.email),1)]),_:1})]),n("div",ae,[s(r,{class:"flex-1"},{dt:t(()=>[le]),default:t(()=>[o(" "+l(e.patient.cin),1)]),_:1}),s(r,{class:"flex-1"},{dt:t(()=>[de]),default:t(()=>[o(" "+l(e.patient.ddn),1)]),_:1})]),n("div",re,[s(r,{class:"flex-1"},{dt:t(()=>[ce]),default:t(()=>[o(" "+l(e.patient.adresse),1)]),_:1}),s(r,{class:"flex-1"},{dt:t(()=>[fe]),default:t(()=>[o(" "+l(e.patient.count_fichiers),1)]),_:1})])])):c("",!0),n("div",he,[s(b,{"table-id":e.tableId,"ajax-url":e.ajaxUrl,columns:e.columns,"ajax-params":e.tableParams,onShowModel:e.showModel,onEditModel:e.editModel,onDeleteModel:e.confirmDeletion,onShowConsultations:e.showConsultations},null,8,["table-id","ajax-url","columns","ajax-params","onShowModel","onEditModel","onDeleteModel","onShowConsultations"])]),s(M,{title:"Confirm Deletion",show:e.confirmDelete},{content:t(()=>[ue]),footer:t(()=>[n("div",me,[s(h,{as:"button",type:"button",onClick:w(e.cancelDelete,["stop"]),class:"bg-red-500"},{default:t(()=>[pe]),_:1},8,["onClick"]),s(h,{as:"button",type:"button",onClick:w(e.deleteModel,["prevent"]),class:"bg-green-500"},{default:t(()=>[_e]),_:1},8,["onClick"])])]),_:1},8,["show"]),e.showModal&&e.currentModel?(a(),f("div",ge,[s(g,{show:e.showModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:i[3]||(i[3]=u=>{e.currentModel=null,e.showModal=!1})},{title:t(()=>[o("Show Fichier #"+l(e.currentModel.id),1)]),footer:t(()=>[s(h,{class:"px-4 text-white bg-primary",onClick:i[2]||(i[2]=u=>{e.showModal=!1,e.currentModel=null})},{default:t(()=>[we]),_:1})]),default:t(()=>[s(y,{model:e.currentModel},null,8,["model"])]),_:1},8,["show"])])):c("",!0),e.addModal?(a(),f("div",be,[s(g,{show:e.addModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:i[4]||(i[4]=u=>e.addModal=!1)},{title:t(()=>[Me]),default:t(()=>[s(v,{patient:e.patient,onSuccess:e.addSuccess,onError:e.addError},null,8,["patient","onSuccess","onError"])]),_:1},8,["show"])])):c("",!0)])])):(a(),f("div",ye," You are not authorized to view a list of Fichiers "))]),_:1})}var Ye=B(P,[["render",ve]]);export{Ye as default};
