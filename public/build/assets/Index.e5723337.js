import{J as D}from"./JigLayout.f5eb6c53.js";import{J as j}from"./ConfirmationModal.f608ab13.js";import{J as $}from"./DialogModal.b2f3f5a5.js";import{I as N}from"./InertiaButton.c6dbc8f4.js";import{J as I}from"./JigToggle.7d0db7e1.js";import{D as x,J}from"./DtComponent.941efde2.js";import{D as R}from"./DisplayMixin.328c366f.js";import E from"./ShowForm.daeb7f65.js";import{d as S,r as c,o as a,c as _,w as t,a as n,l as i,m as l,e as r,b as o,t as d,q as w}from"./main.b00fb162.js";import{J as P}from"./JigDd.2ba6e98a.js";import L from"./CreateForm.8f08048f.js";import{_ as U}from"./plugin-vue_export-helper.21dcd24c.js";import"./ApplicationLogo.3595876e.js";import"./ShowForm.e515ab1f.js";import"./ShowForm.2a3c3a40.js";import"./index.a8a3989e.js";import"./JigDatepicker.18aebfd1.js";import"./vue-flatpickr.min.852deabf.js";import"./Input.7543e972.js";import"./InfiniteSelect.b537c6d0.js";import"./Label.fc1854d2.js";import"./InputError.da02960c.js";import"./JigTextarea.3e918141.js";const B=S({name:"Index",components:{DtComponent:x,JigToggle:I,InertiaButton:N,JetConfirmationModal:j,JetDialogModal:$,JigModal:J,JigLayout:D,ShowConsultationsForm:E,JigDd:P,CreateConsultationsForm:L},props:{can:Object,columns:Array,fichier:Object},inject:["$refreshDt","$dayjs"],data(){return{tableId:"consultations-dt",tableParams:{},datatable:null,confirmDelete:!1,currentModel:null,withDisabled:!1,showModal:!1,extends_info:!1,addConsultationModal:!1}},mixins:[R],mounted(){},computed:{ajaxUrl(){const e=new URL(this.route("api.consultations.dt"));return this.fichier&&e.searchParams.append("fichier_id",this.fichier.id),e.href}},methods:{addConsultation(){this.addConsultationModal=!0},showModel(e){axios.get(route("api.consultations.show",e)).then(s=>{this.currentModel=s.data.payload,this.showModal=!0})},editModel(e){this.$inertia.visit(this.route("admin.consultations.edit",e.id))},manageModel(e){this.$inertia.visit(this.route("admin.consultations.manage",e.id))},expandInfo(){this.extends_info=!this.extends_info},confirmDeletion(e){this.currentModel=e,this.confirmDelete=!0},cancelDelete(){this.currentModel=!1,this.confirmDelete=!1},addSuccess(){this.displayNotification("success",msg),this.addConsultationModal=!1,this.$refreshDt(this.tableId)},addError(e){this.displayNotification("error",e)},async deleteModel(){const e=this;this.confirmDelete=!1,this.currentModel&&this.$inertia.delete(route("admin.consultations.destroy",e.currentModel),{onFinish:s=>{this.displayNotification("success","Item deleted."),e.$refreshDt(e.tableId)},onError:s=>{console.log(s),this.displayNotification("error","There was an error while deleting the item.")}})},async toggleActivation(e,s){console.log(e),axios.put(route("api.consultations.update",s.id),{enabled:e}).then(h=>{this.displayNotification("success",h.data.message),this.$refreshDt(this.tableId)})},async printReport(e){await axios.get(this.route("api.consultations.print",{consultation_id:e.id}),{responseType:"blob"}).then(s=>{this.displayNotification("success","Consultation Report Printed");const h=new Blob([s.data],{type:"application/pdf"}),f=document.createElement("a");f.href=URL.createObjectURL(h),f.download="Consultation.pdf",f.click(),URL.revokeObjectURL(f.href)}).catch(s=>{var h,f;this.displayNotification("error",((f=(h=s.response)==null?void 0:h.data)==null?void 0:f.message)||s.message||s)}).finally(s=>{})}}}),A={class:"flex flex-wrap items-center justify-between w-full px-4"},F=n("i",{class:"fas fa-arrow-left"},null,-1),O=o(" Retour"),T={class:"flex gap-x-2"},V=n("i",{class:"fas fa-plus"},null,-1),z=o(" Nouveau Consultation"),Y=n("i",{class:"fas fa-redo"},null,-1),q=o(" Refresh"),W={key:0,class:"flex flex-wrap px-4"},G={class:"z-10 flex-auto bg-white md:rounded-md md:shadow-md"},H={class:"w-full p-4 mb-2 text-lg font-black sm:rounded-t-lg bg-primary-100"},K=n("i",{class:"mr-2 fas fa-bars"},null,-1),Q=o(" List Des Consultations "),X={key:0,class:"inline-block"},Z={key:0,class:"fas fa-angle-down"},ee={key:1,class:"fas fa-angle-up"},te={key:0,class:"gap-4 p-4"},oe={key:0,class:"flex"},se=o("Nom:"),ie=o("Prenom:"),ne={class:"flex"},ae=o("Phone:"),le=o("Email:"),re={class:"flex"},de=o("Cin:"),ce=o("Ddn:"),fe={class:"flex"},ue=o("Adresse:"),he=o("Fichiers:"),me={class:"p-4"},pe=n("div",null,"Are you sure you want to delete this record?",-1),_e={class:"flex justify-end gap-x-2"},ge=o("Cancel"),be=o("Yes, Delete"),we={key:1},ye=o("Close"),Me={key:2},Ce=o("Nouveau Consultation"),ve={key:1,class:"p-4 font-bold text-red-500 bg-red-100 rounded-md shadow-md"};function ke(e,s,h,f,De,je){const g=c("inertia-link"),m=c("inertia-button"),u=c("jig-dd"),y=c("dt-component"),M=c("jet-confirmation-modal"),C=c("show-consultations-form"),b=c("jig-modal"),v=c("create-consultations-form"),k=c("jig-layout");return a(),_(k,null,{header:t(()=>[n("div",A,[i(g,{href:e.route("admin.dashboard"),class:"text-xl font-black text-white"},{default:t(()=>[F,O]),_:1},8,["href"]),n("div",T,[e.can.create?(a(),_(m,{key:0,onClick:e.addConsultation,classes:"bg-green-100 hover:bg-green-200 text-primary"},{default:t(()=>[V,z]),_:1},8,["onClick"])):l("",!0),i(m,{onClick:s[0]||(s[0]=p=>e.$refreshDt(e.tableId)),classes:"bg-indigo-100 hover:bg-green-200 text-indigo"},{default:t(()=>[Y,q]),_:1})])])]),default:t(()=>[e.can.viewAny?(a(),r("div",W,[n("div",G,[n("h3",H,[K,Q,e.fichier?(a(),r("div",X,[e.fichier.patient?(a(),_(g,{key:0,href:e.route("admin.patients.show",e.fichier.patient.id),class:"text-xl font-black text-primary"},{default:t(()=>[o(" : "+d(e.fichier.patient.title),1)]),_:1},8,["href"])):l("",!0),e.fichier.patient?(a(),r("button",{key:1,style:{"margin-top":"-5px"},type:"button",onClick:s[1]||(s[1]=p=>e.expandInfo()),class:"pl-2 pt-1 pb-1 pr-1 transition duration-150 ease-in-out"},[e.extends_info?l("",!0):(a(),r("i",Z)),e.extends_info?(a(),r("i",ee)):l("",!0)])):l("",!0)])):l("",!0)]),e.fichier&&e.extends_info?(a(),r("dl",te,[e.fichier.patient?(a(),r("div",oe,[i(u,{class:"flex-1"},{dt:t(()=>[se]),default:t(()=>[o(" "+d(e.fichier.patient.nom),1)]),_:1}),i(u,{class:"flex-1"},{dt:t(()=>[ie]),default:t(()=>[o(" "+d(e.fichier.patient.prenom),1)]),_:1})])):l("",!0),n("div",ne,[i(u,{class:"flex-1"},{dt:t(()=>[ae]),default:t(()=>[o(" "+d(e.fichier.patient.phone),1)]),_:1}),i(u,{class:"flex-1"},{dt:t(()=>[le]),default:t(()=>[o(" "+d(e.fichier.patient.email),1)]),_:1})]),n("div",re,[i(u,{class:"flex-1"},{dt:t(()=>[de]),default:t(()=>[o(" "+d(e.fichier.patient.cin),1)]),_:1}),i(u,{class:"flex-1"},{dt:t(()=>[ce]),default:t(()=>[o(" "+d(e.fichier.patient.ddn),1)]),_:1})]),n("div",fe,[i(u,{class:"flex-1"},{dt:t(()=>[ue]),default:t(()=>[o(" "+d(e.fichier.patient.adresse),1)]),_:1}),i(u,{class:"flex-1"},{dt:t(()=>[he]),default:t(()=>[o(" "+d(e.fichier.patient.count_fichiers),1)]),_:1})])])):l("",!0),n("div",me,[i(y,{"table-id":e.tableId,"ajax-url":e.ajaxUrl,columns:e.columns,"ajax-params":e.tableParams,onShowModel:e.showModel,onEditModel:e.editModel,onDeleteModel:e.confirmDeletion,onManageModel:e.manageModel,onPrintReport:e.printReport},null,8,["table-id","ajax-url","columns","ajax-params","onShowModel","onEditModel","onDeleteModel","onManageModel","onPrintReport"])]),i(M,{title:"Confirm Deletion",show:e.confirmDelete},{content:t(()=>[pe]),footer:t(()=>[n("div",_e,[i(m,{as:"button",type:"button",onClick:w(e.cancelDelete,["stop"]),class:"bg-red-500"},{default:t(()=>[ge]),_:1},8,["onClick"]),i(m,{as:"button",type:"button",onClick:w(e.deleteModel,["prevent"]),class:"bg-green-500"},{default:t(()=>[be]),_:1},8,["onClick"])])]),_:1},8,["show"]),e.showModal&&e.currentModel?(a(),r("div",we,[i(b,{show:e.showModal,maxWidthClass:"max-w-7xl","corner-class":"rounded-lg","position-class":"align-middle",onClose:s[3]||(s[3]=p=>{e.currentModel=null,e.showModal=!1})},{title:t(()=>[o("Show Consultation #"+d(e.currentModel.id),1)]),footer:t(()=>[i(m,{class:"px-4 text-white bg-primary",onClick:s[2]||(s[2]=p=>{e.showModal=!1,e.currentModel=null})},{default:t(()=>[ye]),_:1})]),default:t(()=>[i(C,{model:e.currentModel},null,8,["model"])]),_:1},8,["show"])])):l("",!0),e.addConsultationModal?(a(),r("div",Me,[i(b,{show:e.addConsultationModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:s[4]||(s[4]=p=>e.addConsultationModal=!1)},{title:t(()=>[Ce]),default:t(()=>[i(v,{fichier:e.fichier,onSuccess:e.onSuccess,onError:e.onError},null,8,["fichier","onSuccess","onError"])]),_:1},8,["show"])])):l("",!0)])])):(a(),r("div",ve," You are not authorized to view a list of Consultations "))]),_:1})}var Ke=U(B,[["render",ke]]);export{Ke as default};
