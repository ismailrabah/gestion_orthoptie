import{J as D}from"./JigLayout.473189ee.js";import{J as A}from"./ConfirmationModal.bfd904bd.js";import{J as E}from"./DialogModal.c74b5b77.js";import{I as $}from"./InertiaButton.b06aab18.js";import{J as x}from"./JigToggle.39822736.js";import{D as J,J as S}from"./DtComponent.f2251ed9.js";import{D as I}from"./DisplayMixin.328c366f.js";import F from"./ShowForm.eea0ebf9.js";import{j as N,e as d,o as s,f as p,w as t,g as a,x as n,z as l,k as r,C as w,i,y as T}from"./vendor.bec00c62.js";import{J as L}from"./JigDd.6b7b5a1f.js";import B from"./ShowForm.c67b7ae7.js";import P from"./CreateForm.5f7769f2.js";import V from"./EditForm.92d7ef34.js";import{_ as z}from"./plugin-vue_export-helper.5a098b48.js";import"./ApplicationLogo.0294935d.js";import"./main.f27ab7a7.js";import"./ShowForm.bc40c19e.js";import"./ShowForm.503bfef2.js";import"./Checkbox.af44e9b7.js";import"./Input.a6112c10.js";import"./JigTextarea.b8a999f8.js";import"./InfiniteSelect.744baeaa.js";import"./Label.be169a38.js";import"./InputError.aee3d62e.js";const U=N({name:"Manage",components:{DtComponent:J,JigToggle:x,InertiaButton:$,JetConfirmationModal:A,JetDialogModal:E,JigModal:S,JigLayout:D,ShowConsultationTachesForm:F,JigDd:L,ShowConsultationsForm:B,CreateConsultationTachesForm:P,EditConsultationTachForm:V},props:{can:Object,tachesColumns:Array,consultation:Object},inject:["$refreshDt","$dayjs"],data(){return{tachesTableId:"consultation-taches-dt",tachesTableParams:{},datatable:null,confirmTacheDelete:!1,currentTacheModel:null,withDisabled:!1,showTacheModal:!1,showAddTacheModal:!1,showEditTacheModal:!1,extends_info:!1,extends_taches:!0,extends_prestations:!1}},mixins:[I],mounted(){},computed:{tachesAjaxUrl(){const e=new URL(this.route("api.consultation-taches.dt"));return this.consultation&&e.searchParams.append("consultation_id",this.consultation.id),e.href}},methods:{showTacheModel(e){let o=e.id.split(","),u=o[0],f=o[1];axios.get(route("api.consultation-taches.show",{consultation:u,tache:f})).then(m=>{this.currentTacheModel=m.data.payload,this.showTacheModal=!0})},editTacheModel(e){let o=e.id.split(","),u=o[0],f=o[1];axios.get(route("api.consultation-taches.show",{consultation:u,tache:f})).then(m=>{this.currentTacheModel=m.data.payload,this.showEditTacheModal=!0})},AddTache(){this.showAddTacheModal=!0},AddPrestation(e){},expandInfo(){this.extends_info=!this.extends_info},confirmTacheDeletion(e){this.currentTacheModel=e,this.confirmTacheDelete=!0},cancelTacheDelete(){this.currentTacheModel=!1,this.confirmTacheDelete=!1},async deleteTacheModel(){const e=this;this.confirmTacheDelete=!1,this.currentTacheModel&&this.$inertia.delete(route("admin.consultation-taches.destroy",e.currentTacheModel),{onFinish:o=>{this.displayNotification("success","Item deleted."),e.$refreshDt(e.tachesTableId)},onError:o=>{console.log(o),this.displayNotification("error","There was an error while deleting the item.")}})},async toggleActivation(e,o){axios.put(route("api.consultation-taches.update",o.id),{enabled:e}).then(u=>{this.displayNotification("success",u.data.message),this.$refreshDt(this.tachesTableId)})},onAddTacheSuccess(e){this.displayNotification("success",e),this.showAddTacheModal=!1,this.$refreshDt(this.tachesTableId)},onAddTacheError(e){this.displayNotification("error",e)}}}),O={class:"flex flex-wrap items-center justify-between w-full px-4"},R=a("i",{class:"fas fa-arrow-left"},null,-1),Y=i(" Retour"),G={class:"flex gap-x-2"},W=a("i",{class:"fas fa-plus"},null,-1),q=i(" Ajouter une t\xE2che "),H=a("i",{class:"fas fa-plus"},null,-1),K=i(" Ajouter une prestation "),Q={key:0,class:"flex flex-wrap px-4"},X={class:"z-10 flex-auto bg-white md:rounded-md md:shadow-md"},Z={class:"w-full p-4 text-lg font-black sm:rounded-t-lg bg-primary-200"},ee=a("i",{class:"mr-2 fas fa-briefcase-medical text-black"},null,-1),oe=i("Gestion de Consultation "),te={key:0,class:"fas fa-angle-down"},se={key:1,class:"fas fa-angle-up"},ae={key:0,class:"gap-4 p-4"},ne={class:"w-full p-4 text-lg font-black sm:rounded-t-lg bg-primary-100"},ie=a("i",{class:"mr-2 fas fa-tasks"},null,-1),le=i(" List des t\xE2ches "),re={key:0,class:"fas fa-angle-down"},de={key:1,class:"fas fa-angle-up"},ce={key:1,class:"p-4"},he=a("div",null,"Are you sure you want to delete this record?",-1),ue={class:"flex justify-end gap-x-2"},fe=i("Cancel"),me=i("Yes, Delete"),pe={key:2},_e=i("Close"),Te={key:3},ge=i("Close"),we={key:4},be=i("Ajouter une t\xE2che "),Me=i("Close"),ye=a("h3",{class:"w-full p-4 mb-2 text-lg font-black sm:rounded-t-lg bg-primary-100"},[a("i",{class:"mr-2 fas fa-hand-holding-heart"}),i(" List des prestations ")],-1),je={key:1,class:"p-4 font-bold text-red-500 bg-red-100 rounded-md shadow-md"};function Ce(e,o,u,f,m,ke){const g=d("inertia-link"),c=d("inertia-button"),b=d("show-consultations-form"),M=d("dt-component"),y=d("jet-confirmation-modal"),j=d("show-consultation-taches-form"),_=d("jig-modal"),C=d("edit-consultation-tach-form"),k=d("create-consultation-taches-form"),v=d("jig-layout");return s(),p(v,null,{header:t(()=>[a("div",O,[n(g,{href:e.route("admin.consultations.index"),class:"text-xl font-black text-white"},{default:t(()=>[R,Y]),_:1},8,["href"]),a("div",G,[e.can.create?(s(),p(c,{key:0,onClick:e.AddTache,classes:"bg-green-100 hover:bg-green-200 text-primary"},{default:t(()=>[W,q]),_:1},8,["onClick"])):l("",!0),e.can.create?(s(),p(c,{key:1,onClick:e.AddPrestation,classes:"bg-green-100 hover:bg-green-200 text-primary"},{default:t(()=>[H,K]),_:1},8,["onClick"])):l("",!0)])])]),default:t(()=>[e.can.viewAny?(s(),r("div",Q,[a("div",X,[a("h3",Z,[ee,e.consultation?(s(),p(g,{key:0,href:e.route("admin.consultations.show",e.consultation.id),class:"text-xl font-black text-primary"},{default:t(()=>[oe]),_:1},8,["href"])):l("",!0),e.consultation?(s(),r("button",{key:1,style:{"margin-top":"-5px"},type:"button",onClick:o[0]||(o[0]=h=>e.expandInfo()),class:"pl-2 pt-1 pb-1 pr-1 transition duration-150 ease-in-out"},[e.extends_info?l("",!0):(s(),r("i",te)),e.extends_info?(s(),r("i",se)):l("",!0)])):l("",!0)]),e.consultation&&e.extends_info?(s(),r("dl",ae,[n(b,{model:e.consultation},null,8,["model"])])):l("",!0),a("h3",ne,[ie,le,a("button",{onClick:o[1]||(o[1]=h=>e.extends_taches=!e.extends_taches),class:"pl-2 pt-1 pb-1 pr-1 transition duration-150 ease-in-out"},[e.extends_taches?l("",!0):(s(),r("i",re)),e.extends_taches?(s(),r("i",de)):l("",!0)])]),e.extends_taches?(s(),r("div",ce,[n(M,{"table-id":e.tachesTableId,"ajax-url":e.tachesAjaxUrl,columns:e.tachesColumns,"ajax-params":e.tachesTableParams,onShowModel:e.showTacheModel,onEditModel:e.editTacheModel,onDeleteModel:e.confirmTacheDeletion},null,8,["table-id","ajax-url","columns","ajax-params","onShowModel","onEditModel","onDeleteModel"])])):l("",!0),n(y,{title:"Confirm Deletion",show:e.confirmTacheDelete},{content:t(()=>[he]),footer:t(()=>[a("div",ue,[n(c,{as:"button",type:"button",onClick:w(e.cancelTacheDelete,["stop"]),class:"bg-red-500"},{default:t(()=>[fe]),_:1},8,["onClick"]),n(c,{as:"button",type:"button",onClick:w(e.deleteTacheModel,["prevent"]),class:"bg-green-500"},{default:t(()=>[me]),_:1},8,["onClick"])])]),_:1},8,["show"]),e.showTacheModal&&e.currentTacheModel?(s(),r("div",pe,[n(_,{show:e.showTacheModal,maxWidthClass:"max-w-7xl","corner-class":"rounded-lg","position-class":"align-middle",onClose:o[3]||(o[3]=h=>{e.currentTacheModel=null,e.showTacheModal=!1})},{title:t(()=>[i("Show Consultation Tach #"+T(e.currentTacheModel.id),1)]),footer:t(()=>[n(c,{class:"px-4 text-white bg-primary",onClick:o[2]||(o[2]=h=>{e.showTacheModal=!1,e.currentTacheModel=null})},{default:t(()=>[_e]),_:1})]),default:t(()=>[n(j,{model:e.currentTacheModel},null,8,["model"])]),_:1},8,["show"])])):l("",!0),e.showEditTacheModal&&e.currentTacheModel?(s(),r("div",Te,[n(_,{show:e.showEditTacheModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:o[5]||(o[5]=h=>{e.currentTacheModel=null,e.showEditTacheModal=!1})},{title:t(()=>[i("Edit Consultation Tach #"+T(e.currentTacheModel.consultation_id)+" / "+T(e.currentTacheModel.tache_id),1)]),footer:t(()=>[n(c,{class:"px-4 text-white bg-primary",style:{display:"inline",top:"-55px",right:"80px",position:"relative"},onClick:o[4]||(o[4]=h=>{e.showEditTacheModal=!1,e.currentTacheModel=null})},{default:t(()=>[ge]),_:1})]),default:t(()=>[n(C,{model:e.currentTacheModel},null,8,["model"])]),_:1},8,["show"])])):l("",!0),e.showAddTacheModal&&e.consultation?(s(),r("div",we,[n(_,{show:e.showAddTacheModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:o[7]||(o[7]=h=>e.showAddTacheModal=!1)},{title:t(()=>[be]),footer:t(()=>[n(c,{class:"px-4 text-white bg-warning",style:{display:"inline",top:"-55px",right:"80px",position:"relative"},onClick:o[6]||(o[6]=h=>{e.showAddTacheModal=!1,e.currentTacheModel=null})},{default:t(()=>[Me]),_:1})]),default:t(()=>[n(k,{consultation:e.consultation,onSuccess:e.onAddTacheSuccess,onError:e.onAddTacheError},null,8,["consultation","onSuccess","onError"])]),_:1},8,["show"])])):l("",!0),ye])])):(s(),r("div",je," You are not authorized to view a list of Consultations "))]),_:1})}var Ke=z(U,[["render",Ce]]);export{Ke as default};
