import{J as A}from"./JigLayout.473189ee.js";import{J as D}from"./ConfirmationModal.bfd904bd.js";import{J as S}from"./DialogModal.c74b5b77.js";import{I as $}from"./InertiaButton.b06aab18.js";import{J as I}from"./JigToggle.39822736.js";import{D as F,J as N}from"./DtComponent.f3ff127b.js";import{D as J}from"./DisplayMixin.328c366f.js";import L from"./ShowForm.fa05b7ba.js";import{j as U,e as d,o as s,f as w,w as t,g as r,x as a,z as n,k as i,C as T,i as l,y as m}from"./vendor.bec00c62.js";import{J as B}from"./JigDd.6b7b5a1f.js";import R from"./ShowForm.8fb0c8b7.js";import O from"./CreateForm.1db368a4.js";import V from"./EditForm.8ee0589f.js";import z from"./CreateForm.b179393d.js";import Y from"./EditForm.47a01352.js";import G from"./ShowForm.3f0a3978.js";import{_ as W}from"./plugin-vue_export-helper.5a098b48.js";import"./ApplicationLogo.0294935d.js";import"./main.ebbf8bb3.js";import"./ShowForm.bc40c19e.js";import"./ShowForm.503bfef2.js";import"./Checkbox.af44e9b7.js";import"./Input.a6112c10.js";import"./JigTextarea.b8a999f8.js";import"./InfiniteSelect.744baeaa.js";import"./Label.be169a38.js";import"./InputError.aee3d62e.js";const q=U({name:"Manage",components:{DtComponent:F,JigToggle:I,InertiaButton:$,JetConfirmationModal:D,JetDialogModal:S,JigModal:N,JigLayout:A,ShowConsultationTachesForm:L,JigDd:B,ShowConsultationsForm:R,CreateConsultationTachesForm:O,EditConsultationTachForm:V,CreateConsultationPrestationsForm:z,EditConsultationPrestationsForm:Y,ShowConsultationPrestationsForm:G},props:{can:Object,tachesColumns:Array,prestationsColumns:Array,consultation:Object},inject:["$refreshDt","$dayjs"],data(){return{tachesTableId:"consultation-taches-dt",tachesTableParams:{},datatable:null,confirmTacheDelete:!1,currentTacheModel:null,withDisabled:!1,showTacheModal:!1,showAddTacheModal:!1,showEditTacheModal:!1,extends_info:!1,extends_taches:!0,extends_prestations:!1,prestationsTableId:"consultation-prestations-dt",prestationsTableParams:{},currentPrestationModel:null,showPrestationModal:!1,showAddPrestationModal:!1,showEditPrestationModal:!1}},mixins:[J],mounted(){},computed:{tachesAjaxUrl(){const o=new URL(this.route("api.consultation-taches.dt"));return this.consultation&&o.searchParams.append("consultation_id",this.consultation.id),o.href},prestationsAjaxUrl(){const o=new URL(this.route("api.consultation-prestations.dt"));return this.consultation&&o.searchParams.append("consultation_id",this.consultation.id),o.href}},methods:{showTacheModel(o){axios.get(route("api.consultation-taches.show",o)).then(e=>{this.currentTacheModel=e.data.payload,this.showTacheModal=!0})},editTacheModel(o){axios.get(route("api.consultation-taches.show",o.id)).then(e=>{this.currentTacheModel=e.data.payload,this.showEditTacheModal=!0})},AddTache(){this.showAddTacheModal=!0},AddPrestation(){this.showAddPrestationModal=!0},showPrestationModel(o){axios.get(route("api.consultation-prestations.show",o)).then(e=>{this.currentPrestationModel=e.data.payload,this.showPrestationModal=!0})},showEditPrestationModel(o){axios.get(route("api.consultation-prestations.show",o.id)).then(e=>{this.currentPrestationModel=e.data.payload,this.showEditPrestationModal=!0})},expandInfo(){this.extends_info=!this.extends_info},confirmTacheDeletion(o){this.currentTacheModel=o,this.confirmTacheDelete=!0},cancelTacheDelete(){this.currentTacheModel=!1,this.confirmTacheDelete=!1},async deleteTacheModel(){const o=this;this.confirmTacheDelete=!1,this.currentTacheModel&&this.$inertia.delete(route("admin.consultation-taches.destroy",o.currentTacheModel),{onFinish:e=>{this.displayNotification("success","Item deleted."),o.$refreshDt(o.tachesTableId)},onError:e=>{console.log(e),this.displayNotification("error","There was an error while deleting the item.")}})},async toggleActivation(o,e){axios.put(route("api.consultation-taches.update",e.id),{enabled:o}).then(u=>{this.displayNotification("success",u.data.message),this.$refreshDt(this.tachesTableId)})},onAddTacheSuccess(o){this.displayNotification("success",o),this.showAddTacheModal=!1,this.$refreshDt(this.tachesTableId)},onAddTacheError(o){this.displayNotification("error",o)},onSuccessEditTache(o){this.displayNotification("success",o),this.showEditTacheModal=!1,this.$refreshDt(this.tachesTableId)},onErrorEditTache(o){this.displayNotification("error",o)},onAddPrestationSuccess(o){this.displayNotification("success",o),this.showAddPrestationModal=!1,this.$refreshDt(this.prestationsTableId)},onAddPrestationError(o){this.displayNotification("error",o)},onSuccessEditPrestation(o){this.displayNotification("success",o),this.showEditPrestationModal=!1,this.$refreshDt(this.prestationsTableId)},onErrorEditPrestation(o){this.displayNotification("error",o)},async printInvoice(o){await axios.get(this.route("api.consultation-taches.print",{consultation_tache_id:o.id}),{responseType:"blob"}).then(e=>{this.displayNotification("success","Consultation Tache Printed");const u=new Blob([e.data],{type:"application/pdf"}),h=document.createElement("a");h.href=URL.createObjectURL(u),h.download="consultation-tache.pdf",h.click(),URL.revokeObjectURL(h.href)}).catch(e=>{var u,h;this.displayNotification("error",((h=(u=e.response)==null?void 0:u.data)==null?void 0:h.message)||e.message||e)}).finally(e=>{})}}}),H={class:"flex flex-wrap items-center justify-between w-full px-4"},K=r("i",{class:"fas fa-arrow-left"},null,-1),Q=l(" Retour"),X={class:"flex gap-x-2"},Z=r("i",{class:"fas fa-plus"},null,-1),x=l(" Ajouter une t\xE2che "),oo=r("i",{class:"fas fa-plus"},null,-1),eo=l(" Ajouter une prestation "),to={key:0,class:"flex flex-wrap px-4"},so={class:"z-10 flex-auto bg-white md:rounded-md md:shadow-md"},ao={class:"w-full p-4 text-lg font-black sm:rounded-t-lg bg-primary-200"},no=r("i",{class:"mr-2 fas fa-briefcase-medical text-black"},null,-1),io=l("Gestion de Consultation "),ro={key:0,class:"fas fa-angle-down"},lo={key:1,class:"fas fa-angle-up"},co={key:0,class:"gap-4 p-4"},ho={class:"w-full p-4 text-lg font-black bg-info-100"},uo=r("i",{class:"mr-2 fas fa-tasks"},null,-1),fo=l(" List des t\xE2ches "),po={key:0,class:"fas fa-angle-down"},mo={key:1,class:"fas fa-angle-up"},wo={key:1,class:"p-4"},Mo=r("div",null,"Are you sure you want to delete this record?",-1),bo={class:"flex justify-end gap-x-2"},To=l("Cancel"),go=l("Yes, Delete"),_o={key:2},yo=l("Close"),Po={key:3},jo={key:4},Co=l("Ajouter une t\xE2che "),Eo={class:"w-full p-4 mb-2 text-lg font-black bg-info-100"},ko=r("i",{class:"mr-2 fas fa-hand-holding-heart"},null,-1),vo=l(" List des prestations "),Ao={key:0,class:"fas fa-angle-down"},Do={key:1,class:"fas fa-angle-up"},So={key:5,class:"p-4"},$o={key:6},Io=l("Close"),Fo={key:7},No={key:8},Jo=l("Ajouter une Prestation "),Lo={key:1,class:"p-4 font-bold text-red-500 bg-red-100 rounded-md shadow-md"};function Uo(o,e,u,h,Bo,Ro){const M=d("inertia-link"),f=d("inertia-button"),g=d("show-consultations-form"),b=d("dt-component"),_=d("jet-confirmation-modal"),y=d("show-consultation-taches-form"),p=d("jig-modal"),P=d("edit-consultation-tach-form"),j=d("create-consultation-taches-form"),C=d("show-consultation-prestations-form"),E=d("edit-consultation-prestations-form"),k=d("create-consultation-prestations-form"),v=d("jig-layout");return s(),w(v,null,{header:t(()=>[r("div",H,[a(M,{href:o.route("admin.consultations.index"),class:"text-xl font-black text-white"},{default:t(()=>[K,Q]),_:1},8,["href"]),r("div",X,[o.can.create?(s(),w(f,{key:0,onClick:o.AddTache,classes:"bg-green-100 hover:bg-green-200 text-primary"},{default:t(()=>[Z,x]),_:1},8,["onClick"])):n("",!0),o.can.create?(s(),w(f,{key:1,onClick:o.AddPrestation,classes:"bg-green-100 hover:bg-green-200 text-primary"},{default:t(()=>[oo,eo]),_:1},8,["onClick"])):n("",!0)])])]),default:t(()=>[o.can.viewAny?(s(),i("div",to,[r("div",so,[r("h3",ao,[no,o.consultation?(s(),w(M,{key:0,href:o.route("admin.consultations.show",o.consultation.id),class:"text-xl font-black text-primary"},{default:t(()=>[io]),_:1},8,["href"])):n("",!0),o.consultation?(s(),i("button",{key:1,style:{"margin-top":"-5px"},type:"button",onClick:e[0]||(e[0]=c=>o.expandInfo()),class:"pl-2 pt-1 pb-1 pr-1 transition duration-150 ease-in-out"},[o.extends_info?n("",!0):(s(),i("i",ro)),o.extends_info?(s(),i("i",lo)):n("",!0)])):n("",!0)]),o.consultation&&o.extends_info?(s(),i("dl",co,[a(g,{model:o.consultation},null,8,["model"])])):n("",!0),r("h3",ho,[uo,fo,r("button",{onClick:e[1]||(e[1]=c=>o.extends_taches=!o.extends_taches),class:"pl-2 pt-1 pb-1 pr-1 transition duration-150 ease-in-out"},[o.extends_taches?n("",!0):(s(),i("i",po)),o.extends_taches?(s(),i("i",mo)):n("",!0)])]),o.extends_taches?(s(),i("div",wo,[a(b,{"table-id":o.tachesTableId,"ajax-url":o.tachesAjaxUrl,columns:o.tachesColumns,"ajax-params":o.tachesTableParams,onShowModel:o.showTacheModel,onEditModel:o.editTacheModel,onDeleteModel:o.confirmTacheDeletion,onPrintInvoice:o.printInvoice},null,8,["table-id","ajax-url","columns","ajax-params","onShowModel","onEditModel","onDeleteModel","onPrintInvoice"])])):n("",!0),a(_,{title:"Confirm Deletion",show:o.confirmTacheDelete},{content:t(()=>[Mo]),footer:t(()=>[r("div",bo,[a(f,{as:"button",type:"button",onClick:T(o.cancelTacheDelete,["stop"]),class:"bg-red-500"},{default:t(()=>[To]),_:1},8,["onClick"]),a(f,{as:"button",type:"button",onClick:T(o.deleteTacheModel,["prevent"]),class:"bg-green-500"},{default:t(()=>[go]),_:1},8,["onClick"])])]),_:1},8,["show"]),o.showTacheModal&&o.currentTacheModel?(s(),i("div",_o,[a(p,{show:o.showTacheModal,maxWidthClass:"max-w-7xl","corner-class":"rounded-lg","position-class":"align-middle",onClose:e[3]||(e[3]=c=>{o.currentTacheModel=null,o.showTacheModal=!1})},{title:t(()=>[l("Show Consultation Tach #"+m(o.currentTacheModel.id),1)]),footer:t(()=>[a(f,{class:"px-4 text-white bg-primary",onClick:e[2]||(e[2]=c=>{o.showTacheModal=!1,o.currentTacheModel=null})},{default:t(()=>[yo]),_:1})]),default:t(()=>[a(y,{model:o.currentTacheModel},null,8,["model"])]),_:1},8,["show"])])):n("",!0),o.showEditTacheModal&&o.currentTacheModel?(s(),i("div",Po,[a(p,{show:o.showEditTacheModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:e[4]||(e[4]=c=>{o.currentTacheModel=null,o.showEditTacheModal=!1})},{title:t(()=>[l("Edit Consultation Tach #"+m(o.currentTacheModel.consultation_id)+" / "+m(o.currentTacheModel.tache_id),1)]),default:t(()=>[a(P,{model:o.currentTacheModel,onSuccess:o.onSuccessEditTache,onError:o.onErrorEditTache},null,8,["model","onSuccess","onError"])]),_:1},8,["show"])])):n("",!0),o.showAddTacheModal&&o.consultation?(s(),i("div",jo,[a(p,{show:o.showAddTacheModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:e[5]||(e[5]=c=>o.showAddTacheModal=!1)},{title:t(()=>[Co]),default:t(()=>[a(j,{consultation:o.consultation,onSuccess:o.onAddTacheSuccess,onError:o.onAddTacheError},null,8,["consultation","onSuccess","onError"])]),_:1},8,["show"])])):n("",!0),r("h3",Eo,[ko,vo,r("button",{onClick:e[6]||(e[6]=c=>o.extends_prestations=!o.extends_prestations),class:"pl-2 pt-1 pb-1 pr-1 transition duration-150 ease-in-out"},[o.extends_prestations?n("",!0):(s(),i("i",Ao)),o.extends_prestations?(s(),i("i",Do)):n("",!0)])]),o.extends_prestations?(s(),i("div",So,[a(b,{"table-id":o.prestationsTableId,"ajax-url":o.prestationsAjaxUrl,columns:o.prestationsColumns,"ajax-params":o.prestationsTableParams,onShowModel:o.showPrestationModel,onEditModel:o.showEditPrestationModel,onDeleteModel:o.confirmTacheDeletion},null,8,["table-id","ajax-url","columns","ajax-params","onShowModel","onEditModel","onDeleteModel"])])):n("",!0),o.showPrestationModal&&o.currentPrestationModel?(s(),i("div",$o,[a(p,{show:o.showPrestationModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:e[8]||(e[8]=c=>{o.currentPrestationModel=null,o.showPrestationModal=!1})},{title:t(()=>[l("Show Consultation Tach #"+m(o.currentPrestationModel.id),1)]),footer:t(()=>[a(f,{class:"px-4 text-white bg-primary",onClick:e[7]||(e[7]=c=>{o.showPrestationModal=!1,o.currentPrestationModel=null})},{default:t(()=>[Io]),_:1})]),default:t(()=>[a(C,{model:o.currentPrestationModel},null,8,["model"])]),_:1},8,["show"])])):n("",!0),o.showEditPrestationModal&&o.currentPrestationModel?(s(),i("div",Fo,[a(p,{show:o.showEditPrestationModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:e[9]||(e[9]=c=>{o.currentPrestationModel=null,o.showEditPrestationModal=!1})},{title:t(()=>[l("Edit Consultation Prestation #"+m(o.currentPrestationModel.consultation_id)+" / "+m(o.currentPrestationModel.prestation_id),1)]),default:t(()=>[a(E,{model:o.currentPrestationModel,onSuccess:o.onSuccessEditPrestation,onError:o.onErrorEditPrestation},null,8,["model","onSuccess","onError"])]),_:1},8,["show"])])):n("",!0),o.showAddPrestationModal&&o.consultation?(s(),i("div",No,[a(p,{show:o.showAddPrestationModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:e[10]||(e[10]=c=>o.showAddPrestationModal=!1)},{title:t(()=>[Jo]),default:t(()=>[a(k,{consultation:o.consultation,onSuccess:o.onAddPrestationSuccess,onError:o.onAddPrestationError},null,8,["consultation","onSuccess","onError"])]),_:1},8,["show"])])):n("",!0)])])):(s(),i("div",Lo," You are not authorized to view a list of Consultations "))]),_:1})}var pe=W(q,[["render",Uo]]);export{pe as default};
